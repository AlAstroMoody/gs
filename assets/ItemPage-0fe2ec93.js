import{t as O,o as t,c as s,a,f as n,d as _,g as u,h as R,i as z,j as m,r as A,k as $,b as i,e as y,n as E,w as x,F as f,l as g,s as U,_ as G}from"./index-dcfeb166.js";import{_ as J}from"./BaseButton-56cf332d.js";import{_ as K}from"./ThePreloader-712e9f7f.js";const k={strength:"сила",agility:"ловкость",intelligence:"разум",attack:"урон",defence:"защита",visibility:"обзор",luck:"удача",hp:"ХП",mp:"МП",resist:"сопротивление магии",hp_regeneration:"регенерация здоровья",mp_regeneration:"регенерация маны",mp_regen:"регенерация маны",stealth_detection:"обнаружение невидимок",as:"скорость атаки",ms:"скорость бега",manaburn:"каждый удар сжигает",evade:"уклонение",aura:"аура",active:"актив",distant_resist:"снижение урона",critical_chance:"шанс крита:",block_chance:"шанс блока:",mainParam:"основной параметр"},Q={key:0},W={key:1},X={key:0},Y={key:1},Z={key:0,class:"text-green"},ee={key:2},te={key:3},se={key:4},ae={__name:"ItemParams",props:{item:{default:()=>{},type:Object},param:{default:"",type:String},equalityParams:{default:!1,type:Boolean}},setup(P){const v=P,{item:c,param:r,equalityParams:b}=O(v);return(e,w)=>(t(),s("li",null,[a(b)&&a(r)==="strength"?(t(),s("div",Q,"все статы: "+n(a(c).params.strength),1)):a(c).params[a(r)]&&a(k)[a(r)]?(t(),s("div",W,[a(r)==="manaburn"?(t(),s("span",X,n(a(k)[a(r)])+" "+n(a(c).params[a(r)])+" маны противнику ",1)):a(r)==="critical_chance"?(t(),s("span",Y,[_(n(a(k)[a(r)])+" "+n(a(c).params[a(r)])+"% на x"+n(a(c).params.critical_value)+". ",1),a(c).params.sniper_coef?(t(),s("span",Z," Шанс у снайпера: "+n((a(c).params[a(r)]*a(c).params.sniper_coef).toFixed(1))+"%",1)):u("",!0)])):a(r)==="block_chance"?(t(),s("span",ee,n(a(c).params[a(r)])+"% на блок "+n(a(c).params.block_value)+" урона ",1)):(t(),s("span",te,n(a(k)[a(r)])+": "+n(a(c).params[a(r)]),1)),["as","mp_regeneration","resist","distant_resist","evade"].includes(a(r))?(t(),s("span",se,"%")):u("",!0)])):u("",!0)]))}},ne={key:1},le={key:2,class:"flex w-full justify-between py-4"},oe={class:"h-[calc(100vh-350px)] pb-20 overflow-y-auto scrollbar-custom"},re={class:"text-3xl xxl:text-6xl"},ie={class:"my-2 flex flex-wrap items-center"},ce={class:"flex w-full flex-wrap items-center xs:w-auto"},ue=["src"],de={class:"text-md ml-2 flex h-fit flex-1 justify-end whitespace-nowrap text-second"},_e={class:"ml-4 flex flex-col content-center justify-center"},me={key:0},ve={key:1},pe={key:2},he={class:"text-lg text-red"},ye={key:3},xe={key:4},fe={key:5},ge=["innerHTML"],ke={key:0,class:"my-2 w-full text-white lg:text-xl"},be={key:1,class:"w-full text-lg text-white"},we={class:"text-green"},$e={key:2,class:"text-orange"},Pe={key:3,class:"text-orange"},Ie={key:4,class:"my-2 w-full"},je={key:5,class:"my-1 w-full p-2"},Ce={class:"text-red hover:border-b"},Be={key:0},qe={key:1},Me={class:"w-full"},Ne={key:0,class:"border-bg-silver rounded-lg border p-2 w-fit"},Se={class:"text-red hover:border-b"},Fe={key:0},Te={key:1},Ue={key:6,class:"my-2 rounded-lg border border-silver p-2"},Ve={class:"text-red hover:border-b"},De={key:0},Le={key:1},ze={__name:"ItemPage",setup(P){const{user:v,addItem:c}=R(),r=z(),b=m(()=>U.entities.items),e=m(()=>U.currentItem("items",r.params.id)),w=m(()=>{var l,d;return((l=e.value)==null?void 0:l.goblins)&&!((d=e.value)!=null&&d.goblins.includes(v.goblin.name))}),I=m(()=>{var l;return(l=e.value.notUsed)==null?void 0:l.some(d=>v.inventory.map(h=>h.id).includes(d.id))}),V=m(()=>I.value?"нельзя добавить":w.value?"не подходит гоблину":v.inventory.length===6?"инвентарь переполнен":j.value?`не более ${e.value.max_count||1} шт.`:"добавить в инвентарь"),j=m(()=>{const l=v.inventory.filter(d=>d.id===e.value.id);return!e.value.max_count&&l.length===1?!0:e.value.max_count<=l.length}),D=()=>{j.value||w.value||I.value||v.inventory.length<6&&c(e.value)},C=l=>{var d;return(d=e.value)!=null&&d.count&&e.value.count[l]?`${e.value.count[l]}шт`:""},L=l=>l==="Ангельская кузница"?"text-yellow":l==="Вневременная кузня"?"text-purple":l==="Великая кузница"?"text-orange":l==="Котелок Попса"?"text-green":l==="Демоническая кузница"?"text-red":"",B=m(()=>e.value.params.strength===e.value.params.agility&&e.value.params.agility===e.value.params.intelligence),H=m(()=>Object.keys(e.value.params).sort(l=>["strength","agility","intelligence"].includes(l)?-1:1).filter(l=>B.value?!["agility","intelligence"].includes(l):!0));return(l,d)=>{var q,M,N,S,F,T;const h=A("router-link");return b.value.length?e.value?(t(),s("div",le,[i("div",oe,[i("div",re,n(e.value.name),1),i("div",ie,[i("div",ce,[e.value.src?(t(),s("img",{key:0,src:e.value.src,alt:"logo",class:"h-24 w-24"},null,8,ue)):(t(),$(G,{key:1,color:"red"})),i("div",de,[y(J,{onClick:D,text:V.value},null,8,["text"])]),i("div",_e,[((q=e.value)==null?void 0:q.level)>1?(t(),s("div",me,"требуемый уровень: "+n(e.value.level),1)):(t(),s("div",ve,"Нет ограничения по уровню")),(M=e.value.goblins)!=null&&M.length?(t(),s("div",pe,[_(" Только для класса: "),i("span",he,n(e.value.goblins.join(", ")),1)])):(t(),s("div",ye,"Подходит для всех классов")),e.value.craft?(t(),s("div",xe,[_(" крафт в: "),i("span",{class:E(L(e.value.craft))},n(e.value.craft),3)])):u("",!0),e.value.boss?(t(),s("div",fe,[_(" Босс: "),y(h,{to:`/boss?name=${(N=e.value.boss)==null?void 0:N.name}`,class:"mr-2 text-red"},{default:x(()=>{var o;return[_(n((o=e.value.boss)==null?void 0:o.name),1)]}),_:1},8,["to"])])):u("",!0)])]),i("div",{class:"w-full text-white lg:text-xl",innerHTML:e.value.description},null,8,ge),e.value.max_count?(t(),s("div",ke," Не более "+n(e.value.max_count)+" шт. ",1)):u("",!0),e.value.source?(t(),s("div",be,[_(" Где достать: "),i("span",we,n(e.value.source),1)])):u("",!0),e.value.isMedicDD?(t(),s("div",$e,"Медик-ДД")):u("",!0),e.value.isMedicSupport?(t(),s("div",Pe,"Медик-сап")):u("",!0),e.value.params?(t(),s("ul",Ie,[_(" Бонусы предмета: "),(t(!0),s(f,null,g(H.value,(o,p)=>(t(),$(ae,{key:p,class:"ml-7",item:e.value,param:o,equalityParams:B.value},null,8,["item","param","equalityParams"]))),128))])):u("",!0),(S=e.value.notUsed)!=null&&S.length?(t(),s("div",je,[_(" Нельзя использовать с: "),(t(!0),s(f,null,g(e.value.notUsed,(o,p)=>(t(),s("span",{class:"text-md text-end",key:o.id},[y(h,{to:`/item/${o.id}`},{default:x(()=>[i("span",Ce,n(C(o.id))+" "+n(o.name),1),p!==e.value.notUsed.length-1?(t(),s("span",Be,", ")):(t(),s("span",qe,"; "))]),_:2},1032,["to"])]))),128))])):u("",!0),i("div",Me,[(F=e.value.children)!=null&&F.length?(t(),s("div",Ne,[_(' Из предмета "'+n(e.value.name)+'" можно скрафтить: ',1),(t(!0),s(f,null,g(e.value.children,(o,p)=>(t(),s("span",{class:"text-md text-end",key:o.id},[y(h,{to:`/item/${o.id}`},{default:x(()=>[i("span",Se,n(o.name),1),p!==e.value.children.length-1?(t(),s("span",Fe,", ")):(t(),s("span",Te,"; "))]),_:2},1032,["to"])]))),128))])):u("",!0)]),(T=e.value.parents)!=null&&T.length?(t(),s("div",Ue,[_(' Предмет "'+n(e.value.name)+'" крафтится из: ',1),(t(!0),s(f,null,g(e.value.parents,(o,p)=>(t(),s("span",{class:"text-md text-end",key:o.id},[y(h,{to:`/item/${o.id}`},{default:x(()=>[i("span",Ve,n(C(o.id))+" "+n(o.name),1),p!==e.value.parents.length-1?(t(),s("span",De,", ")):(t(),s("span",Le,"; "))]),_:2},1032,["to"])]))),128))])):u("",!0)])])])):(t(),s("div",ne,"Такого предмета нет")):(t(),$(K,{key:0}))}}};export{ze as default};
