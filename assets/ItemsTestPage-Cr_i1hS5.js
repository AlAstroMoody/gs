import{e as G,P as ze,a as p,v as x,x as h,B,u as _,C as J,y as e,I as Ie,G as se,E as A,L as ae,O as ce,z as ee,o as Ae,Q as Xe,w as me,R as oe,U as Re,n as he,V as Ye,D as Pe,W as we,X as Oe,A as Ne}from"./@vue-C6rom8q0.js";import{u as Ve,b as Me}from"./vue-router-BNACLbcm.js";import{a as Be,_ as We}from"./BaseItemImage-7DzPGebs.js";import{s as E,b as qe,_ as Ee,t as Ue}from"./index-BRKV9hIL.js";import{b as $e}from"./@vueuse-DjbpEQzL.js";import{_ as Se}from"./ThePreloader-Dzzr8Vil.js";import"./yandex-metrika-vue3-BLhOeDw4.js";import"./firebase-H5BtYLRW.js";import"./@firebase-BA115Y1H.js";import"./idb-BXWtuYvb.js";const je={key:0,class:"text-orange"},Ge={class:"text-sm flex justify-between"},Qe={key:0,class:"text-silver text-left mr-4"},Ke={key:1,class:"text-right ml-auto"},Je={class:"text-green"},Ze={key:1,class:"pl-6"},et={key:0},tt={class:"text-green text-sm"},lt={key:1},ot={class:"text-green text-sm"},Te={__name:"AppCraftTestItem",props:{item:{default:()=>{},type:Object},count:{type:Number,default:0},activeChild:{type:Boolean,default:!1}},emits:["choice"],setup(Q,{emit:O}){const N=Ve(),z=Q,v=O,t=G(()=>E.entities.items),{item:n}=ze(z),r=p(!1),T=G(()=>{var w,d;return(d=(w=n.value)==null?void 0:w.craft)==null?void 0:d.length}),X=w=>{r.value=!r.value,v("choice",w)};function U(w){return t.value.find(d=>d.code===w)}function W(w){document.startViewTransition?document.startViewTransition(()=>{v("choice",w)}):v("choice",w)}const $=G(()=>n.value.name===N.query.name);return(w,d)=>(h(),x("ol",null,[_(n)?(h(),x("div",{key:0,class:J([{"font-bold":T.value},"flex items-center group"]),onClick:d[1]||(d[1]=m=>X(_(n)))},[e("button",{onClick:d[0]||(d[0]=m=>W(_(n)))},[Ie(Be,{url:_(n).src,class:"mr-2 mb-1",transitionName:`active-item-icon-${_(n).code}`},null,8,["url","transitionName"])]),e("div",{class:J(["border rounded-r-lg p-3 h-16 group-hover:border-orange",[{"border-orange":$.value},{"border-purple":Q.activeChild}]])},[e("button",{class:J(["group-hover:text-orange",{"text-orange":$.value}])},[se(A(_(n).name)+" "+A(Q.count?`${Q.count} ÑˆÑ‚.`:"")+" ",1),d[4]||(d[4]=e("span",{class:"mx-1 text-red group-hover:text-purple"},null,-1)),T.value?(h(),x("span",je," [ "+A(r.value?"-":"+")+" ] ",1)):B("",!0)],2),e("div",Ge,[_(n).level&&_(n).level!=="0"&&_(n).level!==0?(h(),x("span",Qe,A(_(n).level)+" lvl ",1)):B("",!0),_(n).forge?(h(),x("div",Ke,[d[5]||(d[5]=se(" ÐºÑ€Ð°Ñ„Ñ‚: ")),e("span",Je," ("+A(_(n).alterForge?"Ñ€Ð°Ð·Ð½Ñ‹Ðµ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹":_(n).forge)+") ",1)])):B("",!0)])],2)],2)):B("",!0),T.value&&r.value?(h(),x("ul",Ze,[_(n).alterCraft.length?(h(),x("div",et,[e("span",tt," ("+A(_(n).forge)+") ",1)])):B("",!0),(h(!0),x(ae,null,ce(_(n).craft,m=>(h(),ee(Te,{count:m.count,key:m.code,item:U(m.code),onChoice:d[2]||(d[2]=V=>v("choice",V)),activeChild:$.value},null,8,["count","item","activeChild"]))),128)),_(n).alterCraft.length?(h(),x("div",lt,[e("span",ot," ("+A(_(n).alterForge)+") ",1),(h(!0),x(ae,null,ce(_(n).alterCraft,m=>(h(),ee(Te,{count:m.count,key:m.code,item:U(m.code),onChoice:d[3]||(d[3]=V=>v("choice",V)),activeChild:$.value},null,8,["count","item","activeChild"]))),128))])):B("",!0)])):B("",!0)]))}},st={class:"fixed inset-0 z-50 bg-gray-900 bg-opacity-90"},at={class:"absolute top-4 left-4 z-10 bg-gray-800 text-white px-4 py-2 rounded-lg",style:{"pointer-events":"none"}},nt={__name:"ItemsTree",props:{item:{}},emits:["close"],setup(Q,{emit:O}){const N=Q,z=O,v=p(null),t=p(null),n=p(1),r=p(0),T=p(0),X=p(!1),U=p(0),W=p(0),$=p(30),w=p(0),d=p(null),m=p(null),V=p(new Set),S=p(new Set),j=G(()=>E.entities.items),D=p(new Map),F=p(new Map),L=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA","#F1948A","#D7BDE2"],q=p(new Map),ne=p(null),de=Me();function ve(s){if(!q.value.has(s)){const o=q.value.size%L.length;q.value.set(s,L[o])}return q.value.get(s)}function pe(s){const o=[],u=[{node:s,parentId:null,level:0,parentInstanceId:null}];let k=0;for(D.value.clear(),F.value.clear(),q.value.clear();u.length;){const{node:b,parentId:I,level:f,parentInstanceId:M}=u.shift();if(!b)continue;o[f]||(o[f]=[]);const K=`${b.code}_${k++}`;if(o[f].push({node:b,parentId:I,instanceId:K,parentInstanceId:M}),M&&(F.value.has(M)||F.value.set(M,[]),F.value.get(M).push(K)),b.craft&&b.craft.length)for(const P of b.craft){const H=j.value.find(Z=>Z.code===P.code);u.push({node:H,parentId:b.code,level:f+1,parentInstanceId:K})}}const g=0,C=0,c=0,y=120;for(let b=0;b<o.length;b++){const I=o[b],f=c+(b<6?b*y+(b===0?0:80):6*y+(b-6)*60),M=Math.PI/18*b,K=b<6?2*Math.PI:Math.PI+Math.PI*.5;for(let P=0;P<I.length;P++){const{node:H,instanceId:Z}=I[P],ge=M+K*P/I.length,De=(t.value?t.value.measureText(H.name).width:80)+(b===0?20:10)*2,He=g+f*Math.cos(ge)-De/2,Le=C+f*Math.sin(ge)-$.value/2;D.value.set(Z,{x:He,y:Le,width:De,height:$.value,code:H.code,name:H.name,instanceId:Z,level:b})}}}function be(){const s=Object.values(D.value);let o=!0,u=0;const k=5;for(;o&&u<k;){o=!1,u++;for(let g=0;g<s.length;g++)for(let C=g+1;C<s.length;C++){const c=s[g],y=s[C],b=c.width||100,I=c.height||$.value,f=y.width||100,M=y.height||$.value,K=Math.abs(c.x-y.x),P=Math.abs(c.y-y.y),H=(b+f)/2+30,Z=(I+M)/2+20;if(K<H&&P<Z){o=!0;const ge=c.x<y.x?-20:20,_e=c.y<y.y?-15:15;c.x+=ge,c.y+=_e,y.x-=ge,y.y-=_e,c.x<0?c.isLeftOfRoot=!0:c.x>0&&(c.isLeftOfRoot=!1),c.y<0?c.isAboveRoot=!0:c.y>0&&(c.isAboveRoot=!1),y.x<0?y.isLeftOfRoot=!0:y.x>0&&(y.isLeftOfRoot=!1),y.y<0?y.isAboveRoot=!0:y.y>0&&(y.isAboveRoot=!1)}}}}function ke(){const s=Object.values(D.value),o=new Map;for(const u of s)o.has(u.level)||o.set(u.level,[]),o.get(u.level).push(u);for(const[u,k]of o){if(u===0)continue;const g=k.filter(b=>b.isLeftOfRoot),C=k.filter(b=>!b.isLeftOfRoot),c=k.filter(b=>b.isAboveRoot),y=k.filter(b=>!b.isAboveRoot);if(g.length>1){const I=g[0].x;for(let f=1;f<g.length;f++)g[f].x=I-f*120}if(C.length>1){const I=C[0].x;for(let f=1;f<C.length;f++)C[f].x=I+f*120}if(c.length>1){const I=c[0].y;for(let f=1;f<c.length;f++)c[f].y=I-f*80}if(y.length>1){const I=y[0].y;for(let f=1;f<y.length;f++)y[f].y=I+f*80}}}function re(){for(const[s,o]of F.value){const u=D.value.get(s);if(!u)continue;const k=j.value.find(c=>c.code===u.code);if(!k)continue;const g=u.x+u.width/2,C=u.y+u.height/2;for(const c of o){const y=D.value.get(c);if(!y)continue;const b=y.x+y.width/2,I=y.y+y.height/2,f=`${s}-${c}`,M=S.value.has(f);V.value.size>0&&!M?t.value.globalAlpha=.15:t.value.globalAlpha=1,M?(t.value.strokeStyle=ve(k.code),t.value.lineWidth=u.level===0?6:4,t.value.shadowColor="rgba(255, 255, 255, 0.5)",t.value.shadowBlur=4):(t.value.strokeStyle=ve(k.code),t.value.lineWidth=u.level===0?4:2,t.value.shadowColor="rgba(0, 0, 0, 0.3)",t.value.shadowBlur=2),t.value.beginPath(),t.value.moveTo(g,C),t.value.lineTo(b,I),t.value.stroke(),t.value.shadowColor="transparent",t.value.globalAlpha=1}}}function ye(){for(const[s,o]of D.value){const u=V.value.has(s),k=m.value===s,g=ne.value===s;V.value.size>0&&!(u||k||g)?t.value.globalAlpha=.18:t.value.globalAlpha=1;const C=o.level===0?20:10;let c=o.name;const y=j.value.find(M=>M.code===o.code);if(y&&y.craft&&y.craft.length>0){for(const[M,K]of F.value)if(K.includes(o.instanceId)){const P=j.value.find(H=>H.code===D.value.get(M).code);if(P&&P.craft){const H=P.craft.find(Z=>Z.code===o.code);H&&H.count&&H.count>1&&(c=`${o.name} (${H.count})`)}break}}const I=t.value.measureText(c).width+C*2;let f;if(o.level===0?f="#800080":o.level===1?f="#FF6B6B":o.level===2?f="#96CEB4":o.level===3?f="#FFD700":o.level===4?f="#FF8C00":o.level===5?f="#9370DB":o.level===6?f="#20B2AA":o.level===7?f="#FF69B4":f="#32CD32",u)t.value.fillStyle=f,t.value.shadowColor="rgba(255, 255, 255, 0.5)",t.value.shadowBlur=8,t.value.shadowOffsetX=0,t.value.shadowOffsetY=0;else if(k){const M=f.replace(")",", 0.3)").replace("rgb","rgba");t.value.fillStyle=M,t.value.shadowColor="transparent"}else t.value.fillStyle=f,t.value.shadowColor="transparent";t.value.fillRect(o.x,o.y,I,$.value),u?(t.value.strokeStyle="#ffffff",t.value.lineWidth=3):(t.value.strokeStyle="#222222",t.value.lineWidth=2),t.value.strokeRect(o.x,o.y,I,$.value),u?(t.value.fillStyle="#ffffff",t.value.shadowColor="rgba(0, 0, 0, 0.8)",t.value.shadowBlur=2,t.value.shadowOffsetX=1,t.value.shadowOffsetY=1):(t.value.fillStyle=o.level===0?"#ffffff":"#000000",t.value.shadowColor="transparent"),t.value.textAlign="center",t.value.textBaseline="middle",t.value.font=o.level===0?"14px Arial":"12px Arial",t.value.fillText(c,o.x+I/2,o.y+$.value/2),t.value.globalAlpha=1}}function fe(){v.value.width=window.innerWidth,v.value.height=window.innerHeight}function Ce(s){const o=v.value.getBoundingClientRect(),u=(s.clientX-o.left-v.value.width/2-r.value)/n.value,k=(s.clientY-o.top-v.value.height/2-T.value)/n.value;let g=null;for(const[C,c]of D.value)if(u>=c.x&&u<=c.x+c.width&&k>=c.y&&k<=c.y+c.height){g={id:C,...c};break}if(g){if(ne.value===g.id){const C=encodeURIComponent(g.name);de.push(`/craft?name=${C}`);return}ne.value=g.id,m.value=g.id,R(g.id),Y()}else ne.value=null,m.value=null,V.value.clear(),S.value.clear(),Y()}function ie(s){s.preventDefault();const o=s.deltaY>0?.9:1.1,u=Math.max(.1,Math.min(3,n.value*o)),k=v.value.getBoundingClientRect(),g=s.clientX-k.left,C=s.clientY-k.top,c=u/n.value;r.value=g-v.value.width/2-(g-v.value.width/2-r.value)*c,T.value=C-v.value.height/2-(C-v.value.height/2-T.value)*c,n.value=u,Y()}function te(s){s.button===0&&(X.value=!0,U.value=s.clientX,W.value=s.clientY,w.value=Date.now(),v.value.style.cursor="grabbing",s.preventDefault())}function le(s){if(X.value){const o=s.clientX-U.value,u=s.clientY-W.value;r.value+=o,T.value+=u,U.value=s.clientX,W.value=s.clientY,d.value&&clearTimeout(d.value),t.value.save(),t.value.clearRect(0,0,v.value.width,v.value.height),t.value.translate(v.value.width/2+r.value,v.value.height/2+T.value),t.value.scale(n.value,n.value),ue(),t.value.restore(),s.preventDefault()}else{const o=v.value.getBoundingClientRect(),u=(s.clientX-o.left-v.value.width/2-r.value)/n.value,k=(s.clientY-o.top-v.value.height/2-T.value)/n.value;let g=null;for(const[C,c]of D.value)if(u>=c.x&&u<=c.x+c.width&&k>=c.y&&k<=c.y+c.height){g={id:C,...c};break}g&&g.id!==m.value?(m.value=g.id,R(g.id),Y()):!g&&m.value&&(m.value=null,V.value.clear(),S.value.clear(),Y())}}function xe(s){(s.button===0||!s.button)&&(X.value=!1,v.value.style.cursor="grab",Y())}function Y(){t.value.clearRect(0,0,v.value.width,v.value.height),t.value.save(),t.value.translate(v.value.width/2+r.value,v.value.height/2+T.value),t.value.scale(n.value,n.value),pe(N.item),be(),ke(),ue(),t.value.restore()}function ue(){N.item&&(re(),ye(),re(),ye())}function i(){z("close")}function l(){n.value=1,r.value=0,T.value=0,Y()}function a(){if(N.item){for(const[,s]of D.value)if(s.code===N.item.code&&s.level===0){const o=s.x+s.width/2,u=s.y+s.height/2;r.value=-o*n.value,T.value=-u*n.value,Y();break}}}function R(s){V.value.clear(),S.value.clear(),V.value.add(s);const o=F.value.get(s)||[];for(const u of o)V.value.add(u),S.value.add(`${s}-${u}`);for(const[u,k]of F.value)k.includes(s)&&(V.value.add(u),S.value.add(`${u}-${s}`))}function Fe(s){const o=v.value.getBoundingClientRect(),u=(s.clientX-o.left-r.value)/n.value,k=(s.clientY-o.top-T.value)/n.value;for(const[,g]of D.value)if(u>=g.x&&u<=g.x+g.width&&k>=g.y&&k<=g.y+g.height){const C=encodeURIComponent(g.name);de.push(`/craft?name=${C}`);break}}return Ae(()=>{t.value=v.value.getContext("2d"),fe(),$e(window,"resize",fe),$e(document,"mousemove",le),$e(document,"mouseup",xe),Y()}),(s,o)=>{var u;return h(),x("div",st,[e("button",{onClick:i,class:"absolute top-4 right-4 z-10 warcraft-btn warcraft-btn-red",style:{"pointer-events":"auto"}}," âœ• Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ "),e("div",at,A(((u=Q.item)==null?void 0:u.name)||"Ð”ÐµÑ€ÐµÐ²Ð¾ ÐºÑ€Ð°Ñ„Ñ‚Ð°"),1),e("div",{class:"absolute bottom-4 left-4 z-10 flex items-center gap-4",style:{"pointer-events":"auto"}},[e("div",{class:"flex gap-2"},[e("button",{onClick:l,class:"warcraft-btn warcraft-btn-blue"},"ðŸ”„ Ð¡Ð±Ñ€Ð¾Ñ"),e("button",{onClick:a,class:"warcraft-btn warcraft-btn-green"},"ðŸŽ¯ Ð¦ÐµÐ½Ñ‚Ñ€")]),o[0]||(o[0]=e("span",{class:"ml-3 text-xs text-gray-200 opacity-80 select-none"},"Ð´Ð°Ð±Ð»ÐºÐ»Ð¸Ðº Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð° Ð½Ð° Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚",-1))]),e("canvas",{ref_key:"canvas",ref:v,onWheel:Xe(ie,["prevent"]),onMousedown:te,onMousemove:le,onClick:Ce,onDblclick:Fe,style:{position:"absolute",top:"0",left:"0",cursor:"grab","pointer-events":"auto"}},null,544)])}}},rt={key:1,class:"flex w-full max-h-screen gap-4 h-full pr-8 z-20 overflow-hidden justify-between"},it={class:"w-1/3"},ut={class:"bg-gray-800 text-white p-4 rounded-lg border-2 border-gray-600 shadow-lg mb-4"},ct={class:"flex items-center justify-between mb-2"},dt={class:"flex gap-2"},vt={class:"text-sm text-gray-300"},ft={class:"mt-4"},gt={class:"flex w-full rounded-lg border border-gray-500 bg-gray-700 px-3 text-gray-200 ease-out"},ht={class:"scrollbar-custom",style:{height:"calc(100vh - 250px)","overflow-y":"auto"}},mt=["onClick"],pt={class:"flex items-center gap-3"},bt=["src","alt"],yt={class:"flex-1 min-w-0"},xt={class:"text-white font-semibold text-sm truncate"},wt={key:0,class:"text-gray-300 text-xs"},kt={class:"w-1/3 pt-8 max-h-screen overflow-y-auto"},Ct={key:0,class:"p-4 bg-gray-800 text-white rounded-2xl border-2 border-gray-600 shadow-lg"},_t={class:"flex items-center gap-4 mb-4"},$t={class:"flex-shrink-0"},It=["src","alt"],Bt={class:"flex-1"},Tt={class:"text-xl font-bold text-white leading-5"},At={key:0,class:"text-sm text-gray-300 mt-1"},Vt={class:"text-purple font-semibold"},Mt={key:0,class:"bg-silver p-4 rounded-lg border border-gray-300 text-black"},Dt=["innerHTML"],Nt={key:1,class:"p-4 bg-gray-800 rounded-2xl border-2 border-gray-600 shadow-lg text-center text-gray-400"},Rt={__name:"ItemsV16Page",props:{dataSource:{type:String,default:"itemsV16"}},emits:["switch"],setup(Q,{emit:O}){const N=O,z=Ve(),v=Me(),t=G(()=>E.entities.itemsV16),n=p(""),r=p(null);function T(w){return w?qe+w:"/gs/images/slot.png"}const X=G(()=>{var w;return(w=t.value)!=null&&w.length?t.value.filter(d=>d.name.toLowerCase().includes(n.value.toLowerCase())):[]});function U(w){return w?w.replace(/\|cff([0-9a-fA-F]{6})(.*?)\|r/g,'<span style="color: #$1">$2</span>').replace(/\|n/g,"<br/>").replace(/\\n/g,"<br/>").replace(/\n/g,"<br/>"):""}function W(w){r.value=w,v.push({name:z.name,query:{...z.query,name:w.name,v:"1.6"}})}function $(){if(z.query.name&&t.value.length){const w=decodeURIComponent(z.query.name),d=t.value.find(m=>m.name===w);d&&(r.value=d)}}return Ae(()=>{$()}),me(t,()=>{t.value.length&&$()}),me(()=>z.query.name,()=>{$()}),(w,d)=>t.value.length?(h(),x("main",rt,[e("div",it,[e("div",ut,[e("div",ct,[d[5]||(d[5]=e("h2",{class:"text-xl font-bold"},"ðŸ“œ Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð¾Ð² (v1.6)",-1)),e("div",dt,[e("button",{onClick:d[0]||(d[0]=m=>N("switch","items")),class:"px-3 py-1 rounded-lg font-medium text-xs transition-all duration-200 border bg-gray-600 border-gray-500 text-gray-300 hover:bg-gray-500"}," 1.5 "),e("button",{onClick:d[1]||(d[1]=m=>N("switch","itemsV16")),class:"px-3 py-1 rounded-lg font-medium text-xs transition-all duration-200 border bg-gradient-to-r from-purple-500 to-purple-600 border-purple-400 text-white shadow-md"}," 1.6 ")])]),d[7]||(d[7]=e("div",{class:"text-red"},"ÐºÑ€Ð°Ñ„Ñ‚ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½",-1)),e("div",vt," ÐÐ°Ð¹Ð´ÐµÐ½Ð¾: "+A(X.value.length)+" Ð¸Ð· "+A(t.value.length)+" Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð¾Ð² ",1),e("div",ft,[e("div",gt,[oe(e("input",{autocomplete:"off","onUpdate:modelValue":d[2]||(d[2]=m=>n.value=m),placeholder:" ",id:"search-input",class:"relative z-10 w-full py-3 bg-transparent outline-none"},null,512),[[Re,n.value]]),d[6]||(d[6]=e("label",{for:"search-input",class:"absolute p-2 duration-300 ease-out"}," Ð¿Ð¾Ð¸ÑÐº Ð¿Ð¾ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÑŽ ",-1))])])]),e("div",ht,[(h(!0),x(ae,null,ce(X.value,m=>{var V;return h(),x("div",{key:m.name,onClick:S=>W(m),class:J(["p-3 mb-2 rounded-lg border-2 cursor-pointer transition-all duration-200",((V=r.value)==null?void 0:V.name)===m.name?"bg-purple-600 border-purple-400 shadow-lg":"bg-gray-700 border-gray-500 hover:bg-gray-600 hover:border-gray-400"])},[e("div",pt,[e("img",{src:T(m.iconPath),alt:m.name,class:"w-16 h-16 bg-purple rounded-lg border flex-shrink-0",onError:d[3]||(d[3]=S=>S.target.src="/gs/images/slot.png"),loading:"lazy"},null,40,bt),e("div",yt,[e("div",xt,A(m.name),1),m.level?(h(),x("div",wt,"Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ: "+A(m.level),1)):B("",!0)])])],10,mt)}),128))])]),e("div",kt,[r.value?(h(),x("div",Ct,[e("div",_t,[e("div",$t,[e("img",{src:T(r.value.iconPath),alt:r.value.name,class:"w-16 h-16 bg-purple rounded-lg border",onError:d[4]||(d[4]=m=>m.target.src="/gs/images/slot.png"),loading:"lazy"},null,40,It)]),e("div",Bt,[e("div",Tt,A(r.value.name),1),r.value.level?(h(),x("div",At,[d[8]||(d[8]=se(" Ð¢Ñ€ÐµÐ±ÑƒÐµÐ¼Ñ‹Ð¹ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ: ")),e("span",Vt,A(r.value.level),1)])):B("",!0)])]),r.value.desc?(h(),x("div",Mt,[e("div",{innerHTML:U(r.value.desc),class:"leading-6"},null,8,Dt)])):B("",!0)])):(h(),x("div",Nt," Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚ Ð¸Ð· ÑÐ¿Ð¸ÑÐºÐ° Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ "))])])):(h(),ee(Se,{key:0,class:"mt-20"}))}},St={class:"flex w-full max-h-screen gap-6 h-full pr-8 z-20 overflow-hidden"},Ft={class:"text-sm text-gray-300"},Ht={key:0,class:"text-yellow-400"},Lt={key:1,class:"text-xs text-gray-400 mt-1"},zt={key:0,class:"text-green-400"},Xt={class:"bg-gray-800 text-white p-4 rounded-lg border-2 border-gray-600 shadow-lg"},Yt={class:"mb-4 p-2 bg-gray-700 rounded border border-gray-500"},Pt={class:"flex gap-2"},Ot={class:"mb-4"},Wt={class:"flex w-full rounded-lg border border-gray-500 bg-gray-700 px-3 text-gray-200 ease-out"},qt={class:"space-y-3"},Et={class:"flex items-center justify-between p-2 bg-gray-700 rounded border border-gray-500"},Ut={class:"flex items-center justify-between p-2 bg-gray-700 rounded border border-gray-500"},jt={class:"flex items-center justify-between p-2 bg-gray-700 rounded border border-gray-500"},Gt={class:"p-2 bg-gray-700 rounded border border-gray-500"},Qt=["value"],Kt={key:0,class:"flex items-center justify-between p-2 bg-gray-600 rounded border border-gray-400"},Jt={class:"flex items-center gap-4 mb-4"},Zt={class:"flex-shrink-0"},el={class:"flex-1"},tl={class:"text-xl font-bold text-white leading-5"},ll={key:0,class:"text-sm text-gray-300"},ol={class:"text-purple font-semibold"},sl={class:"flex gap-2"},al={class:"bg-silver p-4 rounded-lg border border-gray-300 mb-4 text-black"},nl=["innerHTML"],rl=["innerHTML"],il={class:"flex flex-wrap gap-2"},ul=["onClick","onMouseenter"],cl={__name:"ItemsTestPage",setup(Q){const O=Me(),N=Ve(),{show:z,hide:v}=Ue,t=p("items"),n=G(()=>E.entities.items),r=p(null),T=p(null),X=p(null),U=p(null),W=p(null),$=p(null),w=p("calc(100vh - 200px)"),d=p("calc(100vh - 500px)");function m(){he(()=>{if(X.value){const i=X.value.offsetHeight,l=window.innerHeight-i-100;w.value=`${l}px`}if(W.value){const i=W.value.offsetTop,l=window.innerHeight-i-50;d.value=`${l}px`}})}function V(i){return i.replaceAll("|n","<br/>").replaceAll("<br/><br/>","")}const S=p(""),j=p(!1),D=p(!1),F=p(!1),L=p(""),q=p(!1),ne=G(()=>E.entities.goblins||[]);function de(i){return i.toLowerCase().replace(/Ñ‘/g,"Ðµ").replace(/c/g,"Ñ").replace(/a/g,"Ð°").replace(/o/g,"Ð¾").replace(/e/g,"Ðµ").replace(/p/g,"Ñ€").replace(/y/g,"Ñƒ").replace(/x/g,"Ñ…").replace(/\s+/g," ").trim()}function ve(i,l){return i.goblinClasses&&i.goblinClasses.some(a=>de(a)===de(l))}const pe=G(()=>{var l;if(!((l=n.value)!=null&&l.length))return[];let i=n.value.filter(a=>a.name.toLowerCase().includes(S.value.toLowerCase()));return j.value&&(i=i.filter(a=>a.desc.includes("Ð£Ð´Ð°Ñ‡Ð°"))),F.value&&(i=i.filter(a=>a.desc.includes("ÐÑƒÑ€Ð°"))),L.value&&(q.value?i=i.filter(a=>a.isForAllClasses?!0:a.goblinClasses&&a.goblinClasses.length>0?ve(a,L.value):!0):i=i.filter(a=>ve(a,L.value))),D.value?i=i.sort((a,R)=>Number(a.level)-Number(R.level)):i=i.sort((a,R)=>Number(R.level)-Number(a.level)),he(()=>{$.value&&($.value.scrollTop=0)}),i}),be=G(()=>{var i;return(i=n.value)!=null&&i.length?n.value.filter(l=>l.craft.some(a=>{var R;return a.code===((R=r.value)==null?void 0:R.code)})):[]});function ke(i){const l=n.value.find(a=>a.code===i.code);l&&(r.value&&r.value.code!==l.code&&(T.value=r.value),v(),r.value=l,fe(l.name))}const re=p(!1);function ye(i){re.value=!0,r.value=i,fe(i.name),setTimeout(()=>{re.value=!1},100)}function fe(i){v(),document.startViewTransition?document.startViewTransition(()=>{O.push({name:"craft",query:{name:i}})}):O.push({name:"craft",query:{name:i}})}function Ce(){v(),document.startViewTransition?document.startViewTransition(()=>{O.go(-1)}):O.go(-1)}function ie(){n.value.length&&(r.value=n.value.find(i=>i.name===N.query.name),r.value&&!re.value&&setTimeout(()=>{Y()},300))}const te=p(!1),le=p(!1);Ae(async()=>{v(),N.query.v==="1.6"&&t.value!=="itemsV16"&&(E.entities.itemsV16.length===0&&await E.getItemsV16(),t.value="itemsV16"),N.query.name&&ie(),he(()=>{setTimeout(()=>{le.value=!0,m()},100)}),window.addEventListener("resize",m)}),Ye(()=>{window.removeEventListener("resize",m)}),me(()=>N.query.name,i=>{v(),i&&document.startViewTransition?document.startViewTransition(()=>{ie(),te.value=!1}):(ie(),te.value=!1),he(()=>{m()})}),me(n,()=>{ie(),r.value&&setTimeout(()=>{Y()},500)}),me(()=>N.query.v,async i=>{i==="1.6"&&t.value!=="itemsV16"?(E.entities.itemsV16.length===0&&await E.getItemsV16(),t.value="itemsV16"):i!=="1.6"&&t.value==="itemsV16"&&(t.value="items")},{immediate:!1});function xe(){S.value="",j.value=!1,D.value=!1,F.value=!1,L.value="",q.value=!1}function Y(){!r.value||!$.value||he(()=>{const i=$.value.querySelector(`[data-item-code="${r.value.code}"]`);i&&i.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})})}async function ue(i){t.value!==i&&(i==="itemsV16"&&E.entities.itemsV16.length===0&&await E.getItemsV16(),t.value=i,r.value=null,xe(),O.push({name:N.name,query:{}}))}return(i,l)=>t.value==="itemsV16"?(h(),ee(Rt,{key:0,onSwitch:ue})):(h(),x(ae,{key:1},[n.value.length?B("",!0):(h(),ee(Se,{key:0,class:"mt-20"})),e("main",St,[e("div",{class:J(["w-1/2 animate-on-mount",{"slide-in-left":le.value}])},[e("div",{ref_key:"leftBlockHeader",ref:X,class:"bg-gray-800 text-white p-4 rounded-lg border-2 border-gray-600 shadow-lg mb-4"},[l[14]||(l[14]=e("h2",{class:"text-xl font-bold mb-2"},"ðŸ“œ Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð¾Ð²",-1)),e("div",Ft,[se(" ÐÐ°Ð¹Ð´ÐµÐ½Ð¾: "+A(pe.value.length)+" Ð¸Ð· "+A(n.value.length)+" Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð¾Ð² ",1),j.value||F.value||L.value?(h(),x("span",Ht," (Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹) ")):B("",!0),L.value?(h(),x("div",Lt,[se(' ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ ÐºÐ»Ð°ÑÑÑƒ: "'+A(L.value)+'" ',1),q.value?(h(),x("span",zt," + Ð²ÑÑ‘ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰ÐµÐµ")):B("",!0)])):B("",!0)])],512),e("div",{ref_key:"leftBlockScrollContainer",ref:$,class:"scrollbar-custom",style:Pe({height:w.value})},[(h(!0),x(ae,null,ce(pe.value,a=>(h(),ee(Te,{class:"pl-2",key:a.code,item:a,"data-item-code":a.code,onChoice:l[0]||(l[0]=R=>ye(R)),count:a.count},null,8,["item","data-item-code","count"]))),128))],4)],2),e("div",{class:J(["w-1/3 pt-14 animate-on-mount-top",{"slide-in-top delay-200":le.value}])},[e("div",Xt,[l[23]||(l[23]=e("h3",{class:"text-lg font-bold mb-4"},"ðŸ” Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹",-1)),e("div",Yt,[l[15]||(l[15]=e("span",{class:"text-sm block mb-2"},"ðŸ“¦ Ð’ÐµÑ€ÑÐ¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…",-1)),e("div",Pt,[e("button",{onClick:l[1]||(l[1]=a=>ue("items")),class:J(["flex-1 px-3 py-2 rounded-lg font-medium text-xs transition-all duration-200 border",t.value==="items"?"bg-gradient-to-r from-purple-500 to-purple-600 border-purple-400 text-white shadow-md":"bg-gray-600 border-gray-500 text-gray-300 hover:bg-gray-500"])}," 1.5 ",2),e("button",{onClick:l[2]||(l[2]=a=>ue("itemsV16")),class:J(["flex-1 px-3 py-2 rounded-lg font-medium text-xs transition-all duration-200 border",t.value==="itemsV16"?"bg-gradient-to-r from-purple-500 to-purple-600 border-purple-400 text-white shadow-md":"bg-gray-600 border-gray-500 text-gray-300 hover:bg-gray-500"])}," 1.6 ",2)])]),e("div",Ot,[e("div",Wt,[oe(e("input",{autocomplete:"off","onUpdate:modelValue":l[3]||(l[3]=a=>S.value=a),placeholder:" ",id:"input",class:"relative z-10 w-full py-3 bg-transparent outline-none"},null,512),[[Re,S.value]]),l[16]||(l[16]=e("label",{for:"input",class:"absolute p-2 duration-300 ease-out"}," Ð¿Ð¾Ð¸ÑÐº Ð¿Ð¾ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÑŽ ",-1))])]),e("div",qt,[e("label",Et,[l[17]||(l[17]=e("span",{class:"text-sm"},"ðŸŽ² Ð¡ ÑƒÐ´Ð°Ñ‡ÐµÐ¹",-1)),oe(e("input",{type:"checkbox",class:"h-4 w-4 bg-gray-600 accent-green","onUpdate:modelValue":l[4]||(l[4]=a=>j.value=a)},null,512),[[we,j.value]])]),e("label",Ut,[l[18]||(l[18]=e("span",{class:"text-sm"},"ðŸ“ˆ ÐŸÐ¾ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚Ð°Ð½Ð¸ÑŽ ÑƒÑ€Ð¾Ð²Ð½Ñ",-1)),oe(e("input",{type:"checkbox",class:"h-4 w-4 bg-gray-600 accent-green","onUpdate:modelValue":l[5]||(l[5]=a=>D.value=a)},null,512),[[we,D.value]])]),e("label",jt,[l[19]||(l[19]=e("span",{class:"text-sm"},"ðŸ”® ÐŸÐ¾ Ð°ÑƒÑ€Ðµ",-1)),oe(e("input",{type:"checkbox",class:"h-4 w-4 bg-gray-600 accent-green","onUpdate:modelValue":l[6]||(l[6]=a=>F.value=a)},null,512),[[we,F.value]])]),e("div",Gt,[l[22]||(l[22]=e("span",{class:"text-sm block mb-2"},"ðŸ‘¹ ÐŸÐ¾ ÐºÐ»Ð°ÑÑÑƒ Ð³Ð¾Ð±Ð»Ð¸Ð½Ð°",-1)),oe(e("select",{"onUpdate:modelValue":l[7]||(l[7]=a=>L.value=a),class:"w-full bg-gray-600 text-gray-200 text-sm p-1 rounded border border-gray-500 mb-2"},[l[20]||(l[20]=e("option",{value:""},"Ð’ÑÐµ ÐºÐ»Ð°ÑÑÑ‹",-1)),(h(!0),x(ae,null,ce(ne.value,a=>(h(),x("option",{key:a.code,value:a.name},A(a.name),9,Qt))),128))],512),[[Oe,L.value]]),L.value?(h(),x("label",Kt,[l[21]||(l[21]=e("span",{class:"text-xs text-gray-300"},"âœ¨ Ð’ÑÑ‘ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰ÐµÐµ",-1)),oe(e("input",{type:"checkbox",class:"h-3 w-3 bg-gray-500 accent-green","onUpdate:modelValue":l[8]||(l[8]=a=>q.value=a)},null,512),[[we,q.value]])])):B("",!0)]),e("button",{onClick:xe,class:"w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-3 py-2 rounded-lg font-medium shadow-md hover:shadow-lg transition-all duration-200 border border-gray-500 text-sm"}," ðŸ”„ Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ ")])])],2),e("div",{class:J(["w-1/2 pt-8 animate-on-mount-right max-h-screen overflow-y-auto",{"slide-in-right delay-300":le.value}])},[r.value?(h(),x("div",{key:0,ref_key:"rightBlockHeader",ref:U,class:"p-4 bg-gray-800 text-white rounded-2xl pl-8 border-2 border-gray-600 shadow-lg"},[e("div",Jt,[e("div",Zt,[Ie(Be,{url:r.value.src,class:"w-16 h-16",transitionName:`active-item-icon-${r.value.code}`},null,8,["url","transitionName"])]),e("div",el,[e("div",tl,A(r.value.name),1),r.value.level&&r.value.level!=="0"&&r.value.level!==0?(h(),x("div",ll,[l[24]||(l[24]=se(" Ð¢Ñ€ÐµÐ±ÑƒÐµÐ¼Ñ‹Ð¹ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ: ")),e("span",ol,A(r.value.level),1)])):B("",!0)]),e("div",sl,[T.value?(h(),x("button",{key:0,onClick:Ce,class:"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-3 py-2 rounded-lg font-medium shadow-md hover:shadow-lg transition-all duration-200 border border-gray-400 text-sm"}," â¬…ï¸ ÐÐ°Ð·Ð°Ð´ ")):B("",!0),e("button",{onClick:l[9]||(l[9]=a=>te.value=!0),onMouseenter:l[10]||(l[10]=a=>_(z)("Ð¡Ñ…ÐµÐ¼Ð° ÐºÑ€Ð°Ñ„Ñ‚Ð°",a)),onMouseleave:l[11]||(l[11]=(...a)=>_(v)&&_(v)(...a)),class:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-3 py-2 rounded-lg font-medium shadow-md hover:shadow-lg transition-all duration-200 border border-purple-400 text-sm"}," ðŸ§ª Ð­ÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚ ",32)])]),e("div",al,[e("div",{innerHTML:V(r.value.desc),class:"leading-6"},null,8,nl)]),r.value.extended?(h(),ee(We,{key:0,class:"mb-4"},{button:Ne(()=>l[25]||(l[25]=[se("ðŸ“– ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ")])),content:Ne(()=>[e("div",{innerHTML:V(r.value.extended),class:"leading-6 bg-silver p-3 rounded border border-gray-200 text-black"},null,8,rl)]),_:1})):B("",!0)],512)):B("",!0),be.value.length?(h(),x("div",{key:1,ref_key:"rightBlockContent",ref:W,class:"mt-6"},[l[26]||(l[26]=e("div",{class:"py-2 text-lg font-semibold text-gray-200 mb-3"},"âš”ï¸ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð²:",-1)),e("div",il,[(h(!0),x(ae,null,ce(be.value,a=>(h(),x("div",{key:a.code,class:"group relative"},[e("button",{class:"flex items-center rounded-lg border-2 border-gray-500 bg-gray-700 hover:border-yellow-400 hover:shadow-[0_0_12px_gold] hover:bg-gray-600 transition-all duration-200",onClick:R=>ke(a),onMouseenter:R=>_(z)(a.name,R),onMouseleave:l[12]||(l[12]=(...R)=>_(v)&&_(v)(...R))},[Ie(Be,{url:a.src,transitionName:`active-item-icon-${a.code}`},null,8,["url","transitionName"])],40,ul)]))),128))])],512)):B("",!0)],2),te.value?(h(),ee(nt,{key:0,item:r.value,onClose:l[13]||(l[13]=a=>te.value=!1),class:"z-20"},null,8,["item"])):B("",!0)])],64))}},wl=Ee(cl,[["__scopeId","data-v-b6bd36ae"]]);export{wl as default};
