import{e as b,O as F,r as y,l,m as r,u as a,B as R,q as e,D as N,z as A,A as p,F as v,H as k,I,x as T,o as j,w as H,J as L,K as O,L as M}from"./@vue-5e60537e.js";import{a as P,u as U}from"./vue-router-ee9931d1.js";import{_ as q}from"./BaseItemImage-c9368fa0.js";import{s as z}from"./index-3b742960.js";import{_ as S}from"./ThePreloader-395e40a9.js";import"./yandex-metrika-vue3-31715aa8.js";import"./@vueuse-6ebe5ee8.js";import"./firebase-6ed2b05d.js";import"./@firebase-40ef63b3.js";import"./idb-81bdbf9b.js";import"./picocolors-7608e719.js";import"./tailwindcss-animation-delay-bb812693.js";import"./tailwindcss-f34f17cc.js";import"./tailwind-scrollbar-b75acc9f.js";import"./nouislider-b0ecb9ee.js";const E={class:"border rounded-r-lg p-3 h-16 group-hover:border-orange"},J={class:"group-hover:text-orange"},K=e("span",{class:"mx-1 text-red group-hover:text-purple"},null,-1),G={key:0,class:"text-orange"},Q={class:"text-sm flex justify-between"},W={key:0,class:"text-silver text-left mr-4"},X={key:1,class:"text-right ml-auto"},Y={class:"text-green"},Z={key:1,class:"pl-6"},ee={key:0},te={class:"text-green text-sm"},se={key:1},oe={class:"text-green text-sm"},B={__name:"AppCraftTestItem",props:{item:{default:()=>{},type:Object},count:{type:Number,default:0}},emits:["choice"],setup($,{emit:V}){const x=$,i=V,d=b(()=>z.entities.items),{item:n}=F(x),_=y(!1),f=b(()=>{var m,u;return(u=(m=n.value)==null?void 0:m.craft)==null?void 0:u.length}),g=m=>{_.value=!_.value,i("choice",m)};function w(m){return d.value.find(u=>u.code===m)}function C(m){i("choice",m)}return(m,u)=>(l(),r("ol",null,[a(n)?(l(),r("div",{key:0,class:R([{"font-bold":f.value},"flex items-center group"]),onClick:u[1]||(u[1]=c=>g(a(n)))},[e("button",{onClick:u[0]||(u[0]=c=>C(a(n)))},[N(q,{url:a(n).src,class:"mr-2 mb-1"},null,8,["url"])]),e("div",E,[e("button",J,[A(p(a(n).name)+" "+p($.count?`${$.count} шт.`:"")+" ",1),K,f.value?(l(),r("span",G," [ "+p(_.value?"-":"+")+" ] ",1)):v("",!0)]),e("div",Q,[a(n).level!=="0"?(l(),r("span",W,p(a(n).level)+" lvl ",1)):v("",!0),a(n).forge?(l(),r("div",X,[A(" крафт: "),e("span",Y," ("+p(a(n).alterForge?"разные варианты":a(n).forge)+") ",1)])):v("",!0)])])],2)):v("",!0),f.value&&_.value?(l(),r("ul",Z,[a(n).alterCraft.length?(l(),r("div",ee,[e("span",te," ("+p(a(n).forge)+") ",1)])):v("",!0),(l(!0),r(k,null,I(a(n).craft,c=>(l(),T(B,{count:c.count,key:c.code,item:w(c.code),onChoice:u[2]||(u[2]=h=>i("choice",h))},null,8,["count","item"]))),128)),a(n).alterCraft.length?(l(),r("div",se,[e("span",oe," ("+p(a(n).alterForge)+") ",1),(l(!0),r(k,null,I(a(n).alterCraft,c=>(l(),T(B,{count:c.count,key:c.code,item:w(c.code),onChoice:u[3]||(u[3]=h=>i("choice",h))},null,8,["count","item"]))),128))])):v("",!0)])):v("",!0)]))}};const le={class:"flex w-full max-h-screen gap-4 h-full pr-8 z-20 overflow-hidden"},ne={class:"w-1/2"},re={class:"scrollbar-custom h-full mirror pr-8"},ae={class:"mirror"},ue={class:"w-1/3 pt-14"},ce={class:"my-2 flex w-80 rounded-2xl border border-solid border-second bg-gray px-3 pl-3 text-second ease-out ml-auto"},ie=e("label",{for:"input",class:"absolute p-2 duration-300 ease-out"}," поиск по названию ",-1),de={class:"my-1 flex items-end text-right"},me=e("span",{class:"ml-auto"},"с удачей",-1),ve={class:"my-1 flex items-end text-right"},pe=e("span",{class:"ml-auto"},"по возрастанию уровня",-1),_e={class:"w-1/3 pt-8"},fe={key:0,class:"p-4 bg-silver text-black rounded-2xl"},he={class:"text-xl pb-4 flex justify-between"},xe={key:0,class:"text-purple"},ge=["innerHTML"],ye=e("div",null,null,-1),be={key:1,class:"scrollbar-custom h-[calc(100%-100px)]"},ke=e("div",{class:"py-2 text-xl"},"Используется в:",-1),$e={class:"flex flex-wrap gap-2"},we=["onClick"],He={__name:"ItemsTestPage",setup($){const V=P(),x=U(),i=b(()=>z.entities.items),d=y(null);function n(o){return o.replaceAll("|n","<br/>")}const _=y(""),f=y(!1),g=y(!1),w=b(()=>{if(!i.value)return[];let o=i.value.filter(t=>t.name.toLowerCase().includes(_.value.toLowerCase()));return f.value&&(o=o.filter(t=>t.desc.includes("Удача"))),g.value?o=o.sort((t,s)=>t.level-s.level):o=o.sort((t,s)=>s.level-t.level),o}),C=b(()=>i.value.filter(o=>o.craft.some(t=>{var s;return t.code===((s=d.value)==null?void 0:s.code)})));function m(o){const t=i.value.find(s=>s.code===o.code);t&&(d.value=t),c(t.name)}function u(o){d.value=o,c(o.name)}function c(o){V.push({name:"craft",query:{name:o}})}function h(){d.value=i.value.find(o=>o.name===x.query.name)}return j(()=>{x.query.name&&h()}),H(x,()=>h()),(o,t)=>(l(),r(k,null,[i.value.length?v("",!0):(l(),T(S,{key:0,class:"mt-20"})),e("main",le,[e("div",ne,[e("ul",re,[e("div",ae,[(l(!0),r(k,null,I(w.value,s=>(l(),T(B,{key:s.code,item:s,onChoice:t[0]||(t[0]=D=>u(D)),count:s.count},null,8,["item","count"]))),128))])])]),e("div",ue,[e("div",ce,[L(e("input",{autocomplete:"off","onUpdate:modelValue":t[1]||(t[1]=s=>_.value=s),placeholder:" ",id:"input",class:"relative z-10 w-full py-4"},null,512),[[O,_.value]]),ie]),e("label",de,[me,L(e("input",{type:"checkbox",class:"ml-2 h-5 w-5 bg-silver accent-green","onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s)},null,512),[[M,f.value]])]),e("label",ve,[pe,L(e("input",{type:"checkbox",class:"ml-2 h-5 w-5 bg-silver accent-green","onUpdate:modelValue":t[3]||(t[3]=s=>g.value=s)},null,512),[[M,g.value]])])]),e("div",_e,[d.value?(l(),r("div",fe,[e("div",he,[A(p(d.value.name)+" ",1),d.value.level!=="0"?(l(),r("span",xe,p(d.value.level)+" lvl ",1)):v("",!0)]),e("div",{innerHTML:n(d.value.desc)},null,8,ge),ye])):v("",!0),C.value.length?(l(),r("div",be,[ke,e("div",$e,[(l(!0),r(k,null,I(C.value,s=>(l(),r("div",{key:s.code,class:"group relative"},[e("button",{class:"mr-2 mb-1 flex gap-2 items-center",onClick:D=>m(s)},[N(q,{url:s.src},null,8,["url"])],8,we)]))),128))])])):v("",!0)])])],64))}};export{He as default};
