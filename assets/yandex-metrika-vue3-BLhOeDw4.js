let o={id:null,options:{accurateTrackBounce:!0,clickmap:!0,defer:!1,ecommerce:!1,params:[],userParams:{},trackHash:!1,trackLinks:!0,type:0,webvisor:!1,triggerEvent:!1},router:null,env:"development",scriptSrc:"https://mc.yandex.ru/metrika/tag.js",debug:!1,ignoreRoutes:[],skipSamePath:!0};class p{constructor(){this.config=o}addFileExtension(){this.config.debug&&console.log("[vue-yandex-metrika] addFileExtension:",arguments)}extLink(){this.config.debug&&console.log("[vue-yandex-metrika] extLink:",arguments)}file(){this.config.debug&&console.log("[vue-yandex-metrika] file:",arguments)}getClientID(){this.config.debug&&console.log("[vue-yandex-metrika] getClientID:",arguments)}hit(){this.config.debug&&console.log("[vue-yandex-metrika] hit:",arguments)}notBounce(){this.config.debug&&console.log("[vue-yandex-metrika] notBounce:",arguments)}params(){this.config.debug&&console.log("[vue-yandex-metrika] params:",arguments)}reachGoal(){this.config.debug&&console.log("[vue-yandex-metrika] reachGoal:",arguments)}replacePhones(){this.config.debug&&console.log("[vue-yandex-metrika] replacePhones:",arguments)}setUserID(){this.config.debug&&console.log("[vue-yandex-metrika] setUserID:",arguments)}userParams(){this.config.debug&&console.log("[vue-yandex-metrika] userParams:",arguments)}ecommerceImpressions(e){this.config.debug&&console.log("[vue-yandex-metrika] EcommerceImpressions data:",arguments)}ecommerceClick(e){this.config.debug&&console.log("[vue-yandex-metrika] EcommerceClick data:",arguments)}ecommerceDetail(e){this.config.debug&&console.log("[vue-yandex-metrika] EcommerceDetail data:",arguments)}ecommerceAdd(e){this.config.debug&&console.log("[vue-yandex-metrika] EcommerceAdd data:",arguments)}ecommerceRemove(e){this.config.debug&&console.log("[vue-yandex-metrika] EcommerceRemove data:",arguments)}ecommercePurchase(e){this.config.debug&&console.log("[vue-yandex-metrika] EcommercePurchase data:",arguments)}}function v(t,e){let i;try{const a=(window==null?void 0:window.Ya)&&window.Ya.Metrika;e.tryMetrika1&&a?i=new window.Ya.Metrika(t):i=new window.Ya.Metrika2(t)}catch(a){console.error("Error initializing yandex metrika: ",a)}return i||(console.error("No Metrika or Metrika2 in window.Ya"),i=new p),y(i,t),i}function y(t,e){window[`yaCounter${e.id}`]=t}function b(t){const e=o;Object.keys(t).forEach(function(i){e[i]=t[i]})}function x(){if(!(typeof document>"u")){if(!o.id)throw new Error("[vue-yandex-metrika] Please enter a Yandex Metrika tracking ID");if(!o.router&&o.env!=="production")return console.warn("[vue-yandex-metrika] Router is not passed, autotracking is disabled")}}function w(t,e=o.scriptSrc){var i=document.head||document.getElementsByTagName("head")[0];const a=document.createElement("script");a.async=!0,a.charset="utf-8",a.src=e,i.appendChild(a),a.onload=t}function M(t){if(o.env==="production"){const e=Object.assign({id:o.id},o.options);let i=v(e,{tryMetrika1:o.scriptSrc==="https://mc.yandex.ru/metrika/watch.js"});return t.config.globalProperties.$yandexMetrika=i}else return console.warn('[vue-yandex-metrika] Tracking is disabled, because env option is not "production"'),o.debug&&console.warn("[vue-yandex-metrika] DEBUG is true: you'll see all API calls in the console"),t.config.globalProperties.$yandexMetrika=new p}function D(t){o.router&&o.router.afterEach(function(e,i){o.ignoreRoutes&&o.ignoreRoutes.indexOf(String(e.name))>-1||o.skipSamePath&&e.path==i.path||t.hit(e.path,{referer:i.path})})}function E(){(!window.dataLayer||!Array.isArray(window.dataLayer))&&(window.dataLayer=[])}class P{constructor(){this.metrika=null}setMetrika(e){this.metrika=e,this._setFunctions()}addFileExtension(e){console.error("Method not implemented.")}extLink(e,i){console.error("Method not implemented.")}file(e,i){console.error("Method not implemented.")}getClientID(e){console.error("Method not implemented.")}hit(e,i){console.error("Method not implemented.")}notBounce(e){console.error("Method not implemented.")}params(e){console.error("Method not implemented.")}reachGoal(e,i,a,s){console.error("Method not implemented.")}replacePhones(){console.error("Method not implemented.")}setUserID(e){console.error("Method not implemented.")}userParams(e){console.error("Method not implemented.")}ecommerceImpressions(e){this.pushToDatalayer(e)}ecommerceClick(e){this.pushToDatalayer(e)}ecommerceDetail(e){this.pushToDatalayer(e)}ecommerceAdd(e){this.pushToDatalayer(e)}ecommerceRemove(e){this.pushToDatalayer(e)}ecommercePurchase(e){this.pushToDatalayer(e)}_setFunctions(){var e,i,a,s,d,l,u,m,g,h,f;const n=this.metrika;n&&(this.addFileExtension=(e=n.addFileExtension)===null||e===void 0?void 0:e.bind(n),this.extLink=(i=n.extLink)===null||i===void 0?void 0:i.bind(n),this.file=(a=n.file)===null||a===void 0?void 0:a.bind(n),this.getClientID=(s=n.getClientID)===null||s===void 0?void 0:s.bind(n),this.hit=(d=n.hit)===null||d===void 0?void 0:d.bind(n),this.notBounce=(l=n.notBounce)===null||l===void 0?void 0:l.bind(n),this.params=(u=n.params)===null||u===void 0?void 0:u.bind(n),this.reachGoal=(m=n.reachGoal)===null||m===void 0?void 0:m.bind(n),this.replacePhones=(g=n.replacePhones)===null||g===void 0?void 0:g.bind(n),this.setUserID=(h=n.setUserID)===null||h===void 0?void 0:h.bind(n),this.userParams=(f=n.userParams)===null||f===void 0?void 0:f.bind(n))}pushToDatalayer(e){E(),window.dataLayer.push({ecommerce:e})}}let c=new P,r=null;function C(t,e){k(),_(t),I(e)}function I(t,e){if(!r)throw Error("Update available after init");r.config.globalProperties.$yandexMetrika=c,b(t),x(),w(()=>{if(!r)throw Error("Update available after init");const i=M(r);c.setMetrika(i),D(c)},t.scriptSrc)}function _(t){k(),r=t}function k(){const t=new p;c.setMetrika(t)}export{C as i};
