import{e as y,O as F,r as b,l,m as r,u as a,B as R,q as e,D as M,z,A as p,F as v,H as k,I,x as T,o as j,w as H,J as L,K as O,L as D}from"./@vue-5e60537e.js";import{a as P,u as U}from"./vue-router-ee9931d1.js";import{_ as N}from"./BaseItemImage-cfbd4380.js";import{s as q}from"./index-06635288.js";import{_ as S}from"./ThePreloader-395e40a9.js";import"./yandex-metrika-vue3-31715aa8.js";import"./@vueuse-6ebe5ee8.js";import"./firebase-6ed2b05d.js";import"./@firebase-40ef63b3.js";import"./idb-81bdbf9b.js";import"./picocolors-7608e719.js";import"./tailwindcss-animation-delay-bb812693.js";import"./tailwindcss-f34f17cc.js";import"./tailwind-scrollbar-b75acc9f.js";import"./nouislider-b0ecb9ee.js";const E={class:"border rounded-r-lg p-3 h-16 group-hover:border-orange"},J={class:"group-hover:text-orange"},K=e("span",{class:"mx-1 text-red group-hover:text-purple"},null,-1),G={key:0,class:"text-orange"},Q={class:"text-sm flex justify-between"},W={key:0,class:"text-silver text-left mr-4"},X={key:1,class:"text-right ml-auto"},Y={class:"text-green"},Z={key:1,class:"pl-6"},ee={key:0},te={class:"text-green text-sm"},se={key:1},oe={class:"text-green text-sm"},A={__name:"AppCraftTestItem",props:{item:{default:()=>{},type:Object},count:{type:Number,default:0}},emits:["choice"],setup(w,{emit:V}){const x=w,i=V,d=y(()=>q.entities.items),{item:n}=F(x),_=b(!1),f=y(()=>{var m,u;return(u=(m=n.value)==null?void 0:m.craft)==null?void 0:u.length}),g=m=>{_.value=!_.value,i("choice",m)};function $(m){return d.value.find(u=>u.code===m)}function C(m){i("choice",m)}return(m,u)=>(l(),r("ol",null,[a(n)?(l(),r("div",{key:0,class:R([{"font-bold":f.value},"flex items-center group"]),onClick:u[1]||(u[1]=c=>g(a(n)))},[e("button",{onClick:u[0]||(u[0]=c=>C(a(n)))},[M(N,{url:a(n).src,class:"mr-2 mb-1"},null,8,["url"])]),e("div",E,[e("button",J,[z(p(a(n).name)+" "+p(w.count?`${w.count} шт.`:"")+" ",1),K,f.value?(l(),r("span",G," [ "+p(_.value?"-":"+")+" ] ",1)):v("",!0)]),e("div",Q,[a(n).level!=="0"?(l(),r("span",W,p(a(n).level)+" lvl ",1)):v("",!0),a(n).forge?(l(),r("div",X,[z(" крафт: "),e("span",Y," ("+p(a(n).alterForge?"разные варианты":a(n).forge)+") ",1)])):v("",!0)])])],2)):v("",!0),f.value&&_.value?(l(),r("ul",Z,[a(n).alterCraft.length?(l(),r("div",ee,[e("span",te," ("+p(a(n).forge)+") ",1)])):v("",!0),(l(!0),r(k,null,I(a(n).craft,c=>(l(),T(A,{count:c.count,key:c.code,item:$(c.code),onChoice:u[2]||(u[2]=h=>i("choice",h))},null,8,["count","item"]))),128)),a(n).alterCraft.length?(l(),r("div",se,[e("span",oe," ("+p(a(n).alterForge)+") ",1),(l(!0),r(k,null,I(a(n).alterCraft,c=>(l(),T(A,{count:c.count,key:c.code,item:$(c.code),onChoice:u[3]||(u[3]=h=>i("choice",h))},null,8,["count","item"]))),128))])):v("",!0)])):v("",!0)]))}};const le={class:"flex w-full max-h-screen gap-4 h-full pr-8 z-20 overflow-hidden"},ne={class:"w-1/2"},re={class:"scrollbar-custom h-full mirror pr-8"},ae={class:"mirror"},ue={class:"w-1/3 pt-14"},ce={class:"my-2 flex w-80 rounded-2xl border border-solid border-second bg-gray px-3 pl-3 text-second ease-out ml-auto"},ie=e("label",{for:"input",class:"absolute p-2 duration-300 ease-out"}," поиск по названию ",-1),de={class:"my-1 flex items-end text-right"},me=e("span",{class:"ml-auto"},"с удачей",-1),ve={class:"my-1 flex items-end text-right"},pe=e("span",{class:"ml-auto"},"по возрастанию уровня",-1),_e={class:"w-1/2 pt-8"},fe={key:0,class:"p-4 bg-silver text-black rounded-2xl pl-8"},he={class:"text-xl pb-4 flex justify-between"},xe={key:0,class:"text-purple"},ge=["innerHTML"],be=e("div",null,null,-1),ye={key:1,class:"scrollbar-custom h-[calc(100%-100px)]"},ke=e("div",{class:"py-2 text-xl"},"Используется в:",-1),we={class:"flex flex-wrap gap-2 pl-8"},$e=["onClick"],Ce={class:"group-hover:block hidden absolute -left-8 -top-11 w-fit bg-silver text-purple rounded-md py-2 px-4 border border-purple z-10 min-w-max max-w-36"},Oe={__name:"ItemsTestPage",setup(w){const V=P(),x=U(),i=y(()=>q.entities.items),d=b(null);function n(o){return o.replaceAll("|n","<br/>")}const _=b(""),f=b(!1),g=b(!1),$=y(()=>{if(!i.value)return[];let o=i.value.filter(s=>s.name.toLowerCase().includes(_.value.toLowerCase()));return f.value&&(o=o.filter(s=>s.desc.includes("Удача"))),g.value?o=o.sort((s,t)=>s.level-t.level):o=o.sort((s,t)=>t.level-s.level),o}),C=y(()=>i.value.filter(o=>o.craft.some(s=>{var t;return s.code===((t=d.value)==null?void 0:t.code)})));function m(o){const s=i.value.find(t=>t.code===o.code);s&&(d.value=s),c(s.name)}function u(o){d.value=o,c(o.name)}function c(o){V.push({name:"craft",query:{name:o}})}function h(){d.value=i.value.find(o=>o.name===x.query.name)}return j(()=>{x.query.name&&h()}),H(x,()=>h()),(o,s)=>(l(),r(k,null,[i.value.length?v("",!0):(l(),T(S,{key:0,class:"mt-20"})),e("main",le,[e("div",ne,[e("ul",re,[e("div",ae,[(l(!0),r(k,null,I($.value,t=>(l(),T(A,{key:t.code,item:t,onChoice:s[0]||(s[0]=B=>u(B)),count:t.count},null,8,["item","count"]))),128))])])]),e("div",ue,[e("div",ce,[L(e("input",{autocomplete:"off","onUpdate:modelValue":s[1]||(s[1]=t=>_.value=t),placeholder:" ",id:"input",class:"relative z-10 w-full py-4"},null,512),[[O,_.value]]),ie]),e("label",de,[me,L(e("input",{type:"checkbox",class:"ml-2 h-5 w-5 bg-silver accent-green","onUpdate:modelValue":s[2]||(s[2]=t=>f.value=t)},null,512),[[D,f.value]])]),e("label",ve,[pe,L(e("input",{type:"checkbox",class:"ml-2 h-5 w-5 bg-silver accent-green","onUpdate:modelValue":s[3]||(s[3]=t=>g.value=t)},null,512),[[D,g.value]])])]),e("div",_e,[d.value?(l(),r("div",fe,[e("div",he,[z(p(d.value.name)+" ",1),d.value.level!=="0"?(l(),r("span",xe,p(d.value.level)+" lvl ",1)):v("",!0)]),e("div",{innerHTML:n(d.value.desc)},null,8,ge),be])):v("",!0),C.value.length?(l(),r("div",ye,[ke,e("div",we,[(l(!0),r(k,null,I(C.value,t=>(l(),r("div",{key:t.code,class:"group relative"},[e("button",{class:"mr-2 mb-1 flex gap-2 items-center",onClick:B=>m(t)},[M(N,{url:t.src},null,8,["url"]),e("div",Ce,p(t.name),1)],8,$e)]))),128))])])):v("",!0)])])],64))}};export{Oe as default};
