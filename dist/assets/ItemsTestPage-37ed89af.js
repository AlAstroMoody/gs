import{e as y,O as F,r as b,l,m as r,u as a,B as R,q as e,D as H,z as T,A as p,F as m,H as k,I as L,x as w,o as j,w as O,J as V,K as P,L as B,y as D}from"./@vue-5e60537e.js";import{a as U,u as S}from"./vue-router-ee9931d1.js";import{a as N,_ as E}from"./BaseItemImage-72577b38.js";import{s as q}from"./index-74d37dfe.js";import{_ as J}from"./ThePreloader-395e40a9.js";import"./yandex-metrika-vue3-31715aa8.js";import"./@vueuse-6ebe5ee8.js";import"./firebase-6ed2b05d.js";import"./@firebase-40ef63b3.js";import"./idb-81bdbf9b.js";import"./picocolors-7608e719.js";import"./tailwindcss-animation-delay-bb812693.js";import"./tailwindcss-f34f17cc.js";import"./tailwind-scrollbar-b75acc9f.js";import"./nouislider-b0ecb9ee.js";const K={class:"border rounded-r-lg p-3 h-16 group-hover:border-orange"},G={class:"group-hover:text-orange"},Q=e("span",{class:"mx-1 text-red group-hover:text-purple"},null,-1),W={key:0,class:"text-orange"},X={class:"text-sm flex justify-between"},Y={key:0,class:"text-silver text-left mr-4"},Z={key:1,class:"text-right ml-auto"},ee={class:"text-green"},te={key:1,class:"pl-6"},se={key:0},le={class:"text-green text-sm"},oe={key:1},ne={class:"text-green text-sm"},A={__name:"AppCraftTestItem",props:{item:{default:()=>{},type:Object},count:{type:Number,default:0}},emits:["choice"],setup($,{emit:M}){const x=$,c=M,i=y(()=>q.entities.items),{item:n}=F(x),_=b(!1),f=y(()=>{var v,u;return(u=(v=n.value)==null?void 0:v.craft)==null?void 0:u.length}),g=v=>{_.value=!_.value,c("choice",v)};function C(v){return i.value.find(u=>u.code===v)}function I(v){c("choice",v)}return(v,u)=>(l(),r("ol",null,[a(n)?(l(),r("div",{key:0,class:R([{"font-bold":f.value},"flex items-center group"]),onClick:u[1]||(u[1]=d=>g(a(n)))},[e("button",{onClick:u[0]||(u[0]=d=>I(a(n)))},[H(N,{url:a(n).src,class:"mr-2 mb-1"},null,8,["url"])]),e("div",K,[e("button",G,[T(p(a(n).name)+" "+p($.count?`${$.count} шт.`:"")+" ",1),Q,f.value?(l(),r("span",W," [ "+p(_.value?"-":"+")+" ] ",1)):m("",!0)]),e("div",X,[a(n).level!=="0"?(l(),r("span",Y,p(a(n).level)+" lvl ",1)):m("",!0),a(n).forge?(l(),r("div",Z,[T(" крафт: "),e("span",ee," ("+p(a(n).alterForge?"разные варианты":a(n).forge)+") ",1)])):m("",!0)])])],2)):m("",!0),f.value&&_.value?(l(),r("ul",te,[a(n).alterCraft.length?(l(),r("div",se,[e("span",le," ("+p(a(n).forge)+") ",1)])):m("",!0),(l(!0),r(k,null,L(a(n).craft,d=>(l(),w(A,{count:d.count,key:d.code,item:C(d.code),onChoice:u[2]||(u[2]=h=>c("choice",h))},null,8,["count","item"]))),128)),a(n).alterCraft.length?(l(),r("div",oe,[e("span",ne," ("+p(a(n).alterForge)+") ",1),(l(!0),r(k,null,L(a(n).alterCraft,d=>(l(),w(A,{count:d.count,key:d.code,item:C(d.code),onChoice:u[3]||(u[3]=h=>c("choice",h))},null,8,["count","item"]))),128))])):m("",!0)])):m("",!0)]))}};const re={class:"flex w-full max-h-screen gap-4 h-full pr-8 z-20 overflow-hidden"},ae={class:"w-1/2"},ue={class:"scrollbar-custom h-full mirror pr-8"},ce={class:"mirror"},ie={class:"w-1/3 pt-14"},de={class:"my-2 flex w-80 rounded-2xl border border-solid border-second bg-gray px-3 pl-3 text-second ease-out ml-auto"},me=e("label",{for:"input",class:"absolute p-2 duration-300 ease-out"}," поиск по названию ",-1),ve={class:"my-1 flex items-end text-right"},pe=e("span",{class:"ml-auto"},"с удачей",-1),_e={class:"my-1 flex items-end text-right"},fe=e("span",{class:"ml-auto"},"по возрастанию уровня",-1),he={class:"w-1/2 pt-8"},xe={key:0,class:"p-4 bg-silver text-black rounded-2xl pl-8"},ge={class:"text-xl pb-4 flex justify-between"},be={key:0,class:"text-purple"},ye=["innerHTML"],ke=["innerHTML"],we={key:1,class:"scrollbar-custom h-[calc(100%-100px)]"},$e=e("div",{class:"py-2 text-xl"},"Используется в:",-1),Ce={class:"flex flex-wrap gap-2 pl-8"},Ie=["onClick"],Te={class:"group-hover:block hidden absolute -left-8 -top-11 w-fit bg-silver text-purple rounded-md py-2 px-4 border border-purple z-10 min-w-max max-w-36"},Ue={__name:"ItemsTestPage",setup($){const M=U(),x=S(),c=y(()=>q.entities.items),i=b(null);function n(o){return o.replaceAll("|n","<br/>").replaceAll("<br/><br/>","")}const _=b(""),f=b(!1),g=b(!1),C=y(()=>{if(!c.value)return[];let o=c.value.filter(s=>s.name.toLowerCase().includes(_.value.toLowerCase()));return f.value&&(o=o.filter(s=>s.desc.includes("Удача"))),g.value?o=o.sort((s,t)=>s.level-t.level):o=o.sort((s,t)=>t.level-s.level),o}),I=y(()=>c.value?c.value.filter(o=>o.craft.some(s=>{var t;return s.code===((t=i.value)==null?void 0:t.code)})):[]);function v(o){const s=c.value.find(t=>t.code===o.code);s&&(i.value=s),d(s.name)}function u(o){i.value=o,d(o.name)}function d(o){M.push({name:"craft",query:{name:o}})}function h(){c.value.length&&(i.value=c.value.find(o=>o.name===x.query.name))}return j(()=>{x.query.name&&h()}),O(x,()=>h()),(o,s)=>(l(),r(k,null,[c.value.length?m("",!0):(l(),w(J,{key:0,class:"mt-20"})),e("main",re,[e("div",ae,[e("ul",ue,[e("div",ce,[(l(!0),r(k,null,L(C.value,t=>(l(),w(A,{key:t.code,item:t,onChoice:s[0]||(s[0]=z=>u(z)),count:t.count},null,8,["item","count"]))),128))])])]),e("div",ie,[e("div",de,[V(e("input",{autocomplete:"off","onUpdate:modelValue":s[1]||(s[1]=t=>_.value=t),placeholder:" ",id:"input",class:"relative z-10 w-full py-4"},null,512),[[P,_.value]]),me]),e("label",ve,[pe,V(e("input",{type:"checkbox",class:"ml-2 h-5 w-5 bg-silver accent-green","onUpdate:modelValue":s[2]||(s[2]=t=>f.value=t)},null,512),[[B,f.value]])]),e("label",_e,[fe,V(e("input",{type:"checkbox",class:"ml-2 h-5 w-5 bg-silver accent-green","onUpdate:modelValue":s[3]||(s[3]=t=>g.value=t)},null,512),[[B,g.value]])])]),e("div",he,[i.value?(l(),r("div",xe,[e("div",ge,[T(p(i.value.name)+" ",1),i.value.level!=="0"?(l(),r("span",be,p(i.value.level)+" lvl ",1)):m("",!0)]),e("div",{innerHTML:n(i.value.desc)},null,8,ye),i.value.extended?(l(),w(E,{key:0,class:"-my-4"},{button:D(()=>[T("Подробнее")]),content:D(()=>[e("div",{innerHTML:n(i.value.extended)},null,8,ke)]),_:1})):m("",!0)])):m("",!0),I.value.length?(l(),r("div",we,[$e,e("div",Ce,[(l(!0),r(k,null,L(I.value,t=>(l(),r("div",{key:t.code,class:"group relative"},[e("button",{class:"mr-2 mb-1 flex gap-2 items-center",onClick:z=>v(t)},[H(N,{url:t.src},null,8,["url"]),e("div",Te,p(t.name),1)],8,Ie)]))),128))])])):m("",!0)])])],64))}};export{Ue as default};
