import{e as y,O as F,r as b,l as o,m as r,u as a,B as R,q as e,D as H,z as T,A as p,F as m,H as k,I as L,x as w,o as j,w as O,J as V,K as P,L as B,y as D}from"./@vue-5e60537e.js";import{a as U,u as S}from"./vue-router-ee9931d1.js";import{a as N,_ as E}from"./BaseItemImage-e3bbacd0.js";import{s as q}from"./index-a05f3764.js";import{_ as J}from"./ThePreloader-395e40a9.js";import"./yandex-metrika-vue3-31715aa8.js";import"./@vueuse-6ebe5ee8.js";import"./firebase-6ed2b05d.js";import"./@firebase-40ef63b3.js";import"./idb-81bdbf9b.js";import"./picocolors-7608e719.js";import"./tailwindcss-animation-delay-bb812693.js";import"./tailwindcss-f34f17cc.js";import"./tailwind-scrollbar-b75acc9f.js";import"./nouislider-b0ecb9ee.js";const K={class:"border rounded-r-lg p-3 h-16 group-hover:border-orange"},G={class:"group-hover:text-orange"},Q=e("span",{class:"mx-1 text-red group-hover:text-purple"},null,-1),W={key:0,class:"text-orange"},X={class:"text-sm flex justify-between"},Y={key:0,class:"text-silver text-left mr-4"},Z={key:1,class:"text-right ml-auto"},ee={class:"text-green"},te={key:1,class:"pl-6"},se={key:0},oe={class:"text-green text-sm"},le={key:1},ne={class:"text-green text-sm"},A={__name:"AppCraftTestItem",props:{item:{default:()=>{},type:Object},count:{type:Number,default:0}},emits:["choice"],setup($,{emit:M}){const x=$,i=M,c=y(()=>q.entities.items),{item:n}=F(x),_=b(!1),f=y(()=>{var v,u;return(u=(v=n.value)==null?void 0:v.craft)==null?void 0:u.length}),g=v=>{_.value=!_.value,i("choice",v)};function C(v){return c.value.find(u=>u.code===v)}function I(v){i("choice",v)}return(v,u)=>(o(),r("ol",null,[a(n)?(o(),r("div",{key:0,class:R([{"font-bold":f.value},"flex items-center group"]),onClick:u[1]||(u[1]=d=>g(a(n)))},[e("button",{onClick:u[0]||(u[0]=d=>I(a(n)))},[H(N,{url:a(n).src,class:"mr-2 mb-1"},null,8,["url"])]),e("div",K,[e("button",G,[T(p(a(n).name)+" "+p($.count?`${$.count} шт.`:"")+" ",1),Q,f.value?(o(),r("span",W," [ "+p(_.value?"-":"+")+" ] ",1)):m("",!0)]),e("div",X,[a(n).level!=="0"?(o(),r("span",Y,p(a(n).level)+" lvl ",1)):m("",!0),a(n).forge?(o(),r("div",Z,[T(" крафт: "),e("span",ee," ("+p(a(n).alterForge?"разные варианты":a(n).forge)+") ",1)])):m("",!0)])])],2)):m("",!0),f.value&&_.value?(o(),r("ul",te,[a(n).alterCraft.length?(o(),r("div",se,[e("span",oe," ("+p(a(n).forge)+") ",1)])):m("",!0),(o(!0),r(k,null,L(a(n).craft,d=>(o(),w(A,{count:d.count,key:d.code,item:C(d.code),onChoice:u[2]||(u[2]=h=>i("choice",h))},null,8,["count","item"]))),128)),a(n).alterCraft.length?(o(),r("div",le,[e("span",ne," ("+p(a(n).alterForge)+") ",1),(o(!0),r(k,null,L(a(n).alterCraft,d=>(o(),w(A,{count:d.count,key:d.code,item:C(d.code),onChoice:u[3]||(u[3]=h=>i("choice",h))},null,8,["count","item"]))),128))])):m("",!0)])):m("",!0)]))}};const re={class:"flex w-full max-h-screen gap-4 h-full pr-8 z-20 overflow-hidden"},ae={class:"w-1/2"},ue={class:"scrollbar-custom h-full mirror pr-8"},ce={class:"mirror"},ie={class:"w-1/3 pt-14"},de={class:"my-2 flex w-80 rounded-2xl border border-solid border-second bg-gray px-3 pl-3 text-second ease-out ml-auto"},me=e("label",{for:"input",class:"absolute p-2 duration-300 ease-out"}," поиск по названию ",-1),ve={class:"my-1 flex items-end text-right"},pe=e("span",{class:"ml-auto"},"с удачей",-1),_e={class:"my-1 flex items-end text-right"},fe=e("span",{class:"ml-auto"},"по возрастанию уровня",-1),he={class:"w-1/2 pt-8"},xe={key:0,class:"p-4 bg-silver text-black rounded-2xl pl-8"},ge={class:"text-xl pb-4 flex justify-between"},be={key:0,class:"text-purple"},ye=["innerHTML"],ke=["innerHTML"],we={key:1,class:"scrollbar-custom h-[calc(100%-100px)]"},$e=e("div",{class:"py-2 text-xl"},"Используется в:",-1),Ce={class:"flex flex-wrap gap-2 pl-8"},Ie=["onClick"],Te={class:"group-hover:block hidden absolute -left-8 -top-11 w-fit bg-silver text-purple rounded-md py-2 px-4 border border-purple z-10 min-w-max max-w-36"},Ue={__name:"ItemsTestPage",setup($){const M=U(),x=S(),i=y(()=>q.entities.items),c=b(null);function n(l){return l.replaceAll("|n","<br/>").replaceAll("<br/><br/>","")}const _=b(""),f=b(!1),g=b(!1),C=y(()=>{if(!i.value)return[];let l=i.value.filter(s=>s.name.toLowerCase().includes(_.value.toLowerCase()));return f.value&&(l=l.filter(s=>s.desc.includes("Удача"))),g.value?l=l.sort((s,t)=>s.level-t.level):l=l.sort((s,t)=>t.level-s.level),l}),I=y(()=>i.value.filter(l=>l.craft.some(s=>{var t;return s.code===((t=c.value)==null?void 0:t.code)})));function v(l){const s=i.value.find(t=>t.code===l.code);s&&(c.value=s),d(s.name)}function u(l){c.value=l,d(l.name)}function d(l){M.push({name:"craft",query:{name:l}})}function h(){i.value.length&&(c.value=i.value.find(l=>l.name===x.query.name))}return j(()=>{x.query.name&&h()}),O(x,()=>h()),(l,s)=>(o(),r(k,null,[i.value.length?m("",!0):(o(),w(J,{key:0,class:"mt-20"})),e("main",re,[e("div",ae,[e("ul",ue,[e("div",ce,[(o(!0),r(k,null,L(C.value,t=>(o(),w(A,{key:t.code,item:t,onChoice:s[0]||(s[0]=z=>u(z)),count:t.count},null,8,["item","count"]))),128))])])]),e("div",ie,[e("div",de,[V(e("input",{autocomplete:"off","onUpdate:modelValue":s[1]||(s[1]=t=>_.value=t),placeholder:" ",id:"input",class:"relative z-10 w-full py-4"},null,512),[[P,_.value]]),me]),e("label",ve,[pe,V(e("input",{type:"checkbox",class:"ml-2 h-5 w-5 bg-silver accent-green","onUpdate:modelValue":s[2]||(s[2]=t=>f.value=t)},null,512),[[B,f.value]])]),e("label",_e,[fe,V(e("input",{type:"checkbox",class:"ml-2 h-5 w-5 bg-silver accent-green","onUpdate:modelValue":s[3]||(s[3]=t=>g.value=t)},null,512),[[B,g.value]])])]),e("div",he,[c.value?(o(),r("div",xe,[e("div",ge,[T(p(c.value.name)+" ",1),c.value.level!=="0"?(o(),r("span",be,p(c.value.level)+" lvl ",1)):m("",!0)]),e("div",{innerHTML:n(c.value.desc)},null,8,ye),c.value.extended?(o(),w(E,{key:0,class:"-my-4"},{button:D(()=>[T("Подробнее")]),content:D(()=>[e("div",{innerHTML:n(c.value.extended)},null,8,ke)]),_:1})):m("",!0)])):m("",!0),I.value.length?(o(),r("div",we,[$e,e("div",Ce,[(o(!0),r(k,null,L(I.value,t=>(o(),r("div",{key:t.code,class:"group relative"},[e("button",{class:"mr-2 mb-1 flex gap-2 items-center",onClick:z=>v(t)},[H(N,{url:t.src},null,8,["url"]),e("div",Te,p(t.name),1)],8,Ie)]))),128))])])):m("",!0)])])],64))}};export{Ue as default};
