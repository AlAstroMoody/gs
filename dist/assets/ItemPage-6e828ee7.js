import{u as R}from"./vue-router-ee9931d1.js";import{_ as E}from"./BaseButton-c0a2e1ae.js";import{r as I,l as t,m as s,A as n,F as u,O as G,u as a,z as m,e as p,v as W,x as P,D as y,q as c,B as J,y as g,H as k,I as b}from"./@vue-5e60537e.js";import{a as K,s as U,_ as Q}from"./index-d0b5a8fb.js";import{_ as X}from"./ThePreloader-395e40a9.js";import"./yandex-metrika-vue3-31715aa8.js";import"./@vueuse-6ebe5ee8.js";import"./firebase-6ed2b05d.js";import"./@firebase-40ef63b3.js";import"./idb-81bdbf9b.js";import"./picocolors-7608e719.js";import"./tailwindcss-animation-delay-bb812693.js";import"./tailwindcss-f34f17cc.js";import"./tailwind-scrollbar-b75acc9f.js";import"./nouislider-b0ecb9ee.js";const Y={key:0,class:"fixed bg-silver right-4 top-4 w-80 text-purple z-20 rounded-xl p-4"},Z={__name:"BaseInfoPopup",setup($,{expose:d}){const i=I(!1),l=I("");function x(e){l.value=e,i.value=!0,setTimeout(()=>i.value=!1,5e3)}return d({show:x}),(e,f)=>i.value?(t(),s("div",Y,n(l.value),1)):u("",!0)}},w={strength:"сила",agility:"ловкость",intelligence:"разум",attack:"урон",defence:"защита",visibility:"обзор",luck:"удача",hp:"ХП",mp:"МП",resist:"сопротивление магии",hp_regeneration:"регенерация здоровья",mp_regeneration:"регенерация маны",mp_regen:"регенерация маны",stealth_detection:"обнаружение невидимок",as:"скорость атаки",ms:"скорость бега",manaburn:"каждый удар сжигает",evade:"уклонение",aura:"аура",active:"актив",distant_resist:"снижение урона",critical_chance:"шанс крита:",block_chance:"шанс блока:",mainParam:"основной параметр"},ee={key:0},te={key:1},se={key:0},ae={key:1},ne={key:0,class:"text-green"},oe={key:2},le={key:3},re={key:4},ie={__name:"ItemParams",props:{item:{default:()=>{},type:Object},param:{default:"",type:String},equalityParams:{default:!1,type:Boolean}},setup($){const d=$,{item:i,param:l,equalityParams:x}=G(d);return(e,f)=>(t(),s("li",null,[a(x)&&a(l)==="strength"?(t(),s("div",ee,"все статы: "+n(a(i).params.strength),1)):a(i).params[a(l)]&&a(w)[a(l)]?(t(),s("div",te,[a(l)==="manaburn"?(t(),s("span",se,n(a(w)[a(l)])+" "+n(a(i).params[a(l)])+" маны противнику ",1)):a(l)==="critical_chance"?(t(),s("span",ae,[m(n(a(w)[a(l)])+" "+n(a(i).params[a(l)])+"% на x"+n(a(i).params.critical_value)+". ",1),a(i).params.sniper_coef?(t(),s("span",ne," Шанс у снайпера: "+n((a(i).params[a(l)]*a(i).params.sniper_coef).toFixed(1))+"%",1)):u("",!0)])):a(l)==="block_chance"?(t(),s("span",oe,n(a(i).params[a(l)])+"% на блок "+n(a(i).params.block_value)+" урона ",1)):(t(),s("span",le,n(a(w)[a(l)])+": "+n(a(i).params[a(l)]),1)),["as","mp_regeneration","resist","distant_resist","evade"].includes(a(l))?(t(),s("span",re,"%")):u("",!0)])):u("",!0)]))}},ce={key:1},ue={key:2,class:"flex w-full justify-between py-4"},de={class:"h-[calc(100vh-350px)] pb-20 overflow-y-auto scrollbar-custom"},_e={class:"text-3xl xxl:text-6xl"},me={class:"my-2 flex flex-wrap items-center"},pe={class:"flex w-full flex-wrap items-center xs:w-auto"},ve=["src"],he={class:"text-md ml-2 flex h-fit flex-1 justify-end whitespace-nowrap text-second"},ye={class:"ml-4 flex flex-col content-center justify-center"},xe={key:0},fe={key:1},ge={key:2},ke={class:"text-lg text-red"},be={key:3},we={key:4},$e={key:5},Pe=["innerHTML"],Ie={key:0,class:"my-2 w-full text-white lg:text-xl"},Be={key:1,class:"w-full text-lg text-white"},Ce={class:"text-green"},je={key:2,class:"text-orange"},qe={key:3,class:"text-orange"},Me={key:4,class:"my-2 w-full"},Ne={key:5,class:"my-1 w-full p-2"},Se={class:"text-red hover:border-b"},Te={key:0},De={key:1},Fe={class:"w-full"},Oe={key:0,class:"border-bg-silver rounded-lg border p-2 w-fit"},Ue={class:"text-red hover:border-b"},Ve={key:0},ze={key:1},He={key:6,class:"my-2 rounded-lg border border-silver p-2"},Le={class:"text-red hover:border-b"},Ae={key:0},Re={key:1},lt={__name:"ItemPage",setup($){const{user:d,addItem:i}=K(),l=R(),x=p(()=>U.entities.items),e=p(()=>U.currentItem("items",l.params.id)),f=p(()=>{var o,_;return((o=e.value)==null?void 0:o.goblins)&&!((_=e.value)!=null&&_.goblins.includes(d.goblin.name))}),B=p(()=>{var o;return(o=e.value.notUsed)==null?void 0:o.some(_=>d.inventory.map(h=>h.id).includes(_.id))}),V=p(()=>B.value?"нельзя добавить":f.value?"не подходит гоблину":d.inventory.length===6?"инвентарь переполнен":C.value?`не более ${e.value.max_count||1} шт.`:"добавить в инвентарь"),C=p(()=>{const o=d.inventory.filter(_=>_.id===e.value.id);return!e.value.max_count&&o.length===1?!0:e.value.max_count<=o.length}),z=()=>{d.inventory.length||H(),!(C.value||f.value||B.value)&&d.inventory.length<6&&i(e.value)},j=I(null),H=()=>{j.value.show("В связи с изменением игровых механик, подсчёт параметров гоблина временно работает некорректно")},q=o=>{var _;return(_=e.value)!=null&&_.count&&e.value.count[o]?`${e.value.count[o]}шт`:""},L=o=>o==="Ангельская кузница"?"text-yellow":o==="Вневременная кузня"?"text-purple":o==="Великая кузница"?"text-orange":o==="Котелок Попса"?"text-green":o==="Демоническая кузница"?"text-red":"",M=p(()=>e.value.params.strength===e.value.params.agility&&e.value.params.agility===e.value.params.intelligence),A=p(()=>Object.keys(e.value.params).sort(o=>["strength","agility","intelligence"].includes(o)?-1:1).filter(o=>M.value?!["agility","intelligence"].includes(o):!0));return(o,_)=>{var N,S,T,D,F,O;const h=W("router-link");return x.value.length?e.value?(t(),s("div",ue,[y(Z,{ref_key:"popup",ref:j},null,512),c("div",de,[c("div",_e,n(e.value.name),1),c("div",me,[c("div",pe,[e.value.src?(t(),s("img",{key:0,src:e.value.src,alt:"logo",class:"h-24 w-24"},null,8,ve)):(t(),P(Q,{key:1,color:"red"})),c("div",he,[y(E,{onClick:z,text:V.value},null,8,["text"])]),c("div",ye,[((N=e.value)==null?void 0:N.level)>1?(t(),s("div",xe,"требуемый уровень: "+n(e.value.level),1)):(t(),s("div",fe,"Нет ограничения по уровню")),(S=e.value.goblins)!=null&&S.length?(t(),s("div",ge,[m(" Только для класса: "),c("span",ke,n(e.value.goblins.join(", ")),1)])):(t(),s("div",be,"Подходит для всех классов")),e.value.craft?(t(),s("div",we,[m(" крафт в: "),c("span",{class:J(L(e.value.craft))},n(e.value.craft),3)])):u("",!0),e.value.boss?(t(),s("div",$e,[m(" Босс: "),y(h,{to:`/boss?name=${(T=e.value.boss)==null?void 0:T.name}`,class:"mr-2 text-red"},{default:g(()=>{var r;return[m(n((r=e.value.boss)==null?void 0:r.name),1)]}),_:1},8,["to"])])):u("",!0)])]),c("div",{class:"w-full text-white lg:text-xl",innerHTML:e.value.description},null,8,Pe),e.value.max_count?(t(),s("div",Ie," Не более "+n(e.value.max_count)+" шт. ",1)):u("",!0),e.value.source?(t(),s("div",Be,[m(" Где достать: "),c("span",Ce,n(e.value.source),1)])):u("",!0),e.value.isMedicDD?(t(),s("div",je,"Медик-ДД")):u("",!0),e.value.isMedicSupport?(t(),s("div",qe,"Медик-сап")):u("",!0),e.value.params?(t(),s("ul",Me,[m(" Бонусы предмета: "),(t(!0),s(k,null,b(A.value,(r,v)=>(t(),P(ie,{key:v,class:"ml-7",item:e.value,param:r,equalityParams:M.value},null,8,["item","param","equalityParams"]))),128))])):u("",!0),(D=e.value.notUsed)!=null&&D.length?(t(),s("div",Ne,[m(" Нельзя использовать с: "),(t(!0),s(k,null,b(e.value.notUsed,(r,v)=>(t(),s("span",{class:"text-md text-end",key:r.id},[y(h,{to:`/item/${r.id}`},{default:g(()=>[c("span",Se,n(q(r.id))+" "+n(r.name),1),v!==e.value.notUsed.length-1?(t(),s("span",Te,", ")):(t(),s("span",De,"; "))]),_:2},1032,["to"])]))),128))])):u("",!0),c("div",Fe,[(F=e.value.children)!=null&&F.length?(t(),s("div",Oe,[m(' Из предмета "'+n(e.value.name)+'" можно скрафтить: ',1),(t(!0),s(k,null,b(e.value.children,(r,v)=>(t(),s("span",{class:"text-md text-end",key:r.id},[y(h,{to:`/item/${r.id}`},{default:g(()=>[c("span",Ue,n(r.name),1),v!==e.value.children.length-1?(t(),s("span",Ve,", ")):(t(),s("span",ze,"; "))]),_:2},1032,["to"])]))),128))])):u("",!0)]),(O=e.value.parents)!=null&&O.length?(t(),s("div",He,[m(' Предмет "'+n(e.value.name)+'" крафтится из: ',1),(t(!0),s(k,null,b(e.value.parents,(r,v)=>(t(),s("span",{class:"text-md text-end",key:r.id},[y(h,{to:`/item/${r.id}`},{default:g(()=>[c("span",Le,n(q(r.id))+" "+n(r.name),1),v!==e.value.parents.length-1?(t(),s("span",Ae,", ")):(t(),s("span",Re,"; "))]),_:2},1032,["to"])]))),128))])):u("",!0)])])])):(t(),s("div",ce,"Такого предмета нет")):(t(),P(X,{key:0}))}}};export{lt as default};
