import{e as x,O,r as k,l as o,m as r,u as c,B as V,q as t,D as N,z as I,A as v,F as d,H as C,I as T,x as w,o as P,w as z,J as q,K as U,L as D,y as H}from"./@vue-5e60537e.js";import{u as F,a as S}from"./vue-router-ee9931d1.js";import{a as R,_ as E}from"./BaseItemImage-19c49010.js";import{s as j}from"./index-ce7e7fba.js";import{_ as J}from"./ThePreloader-395e40a9.js";import"./yandex-metrika-vue3-31715aa8.js";import"./@vueuse-6ebe5ee8.js";import"./firebase-6ed2b05d.js";import"./@firebase-40ef63b3.js";import"./idb-81bdbf9b.js";import"./picocolors-7608e719.js";import"./tailwindcss-animation-delay-bb812693.js";import"./tailwindcss-f34f17cc.js";import"./tailwind-scrollbar-b75acc9f.js";import"./nouislider-b0ecb9ee.js";const K=t("span",{class:"mx-1 text-red group-hover:text-purple"},null,-1),G={key:0,class:"text-orange"},Q={class:"text-sm flex justify-between"},W={key:0,class:"text-silver text-left mr-4"},X={key:1,class:"text-right ml-auto"},Y={class:"text-green"},Z={key:1,class:"pl-6"},ee={key:0},te={class:"text-green text-sm"},se={key:1},le={class:"text-green text-sm"},B={__name:"AppCraftTestItem",props:{item:{default:()=>{},type:Object},count:{type:Number,default:0},activeChild:{type:Boolean,default:!1}},emits:["choice"],setup(g,{emit:L}){const b=F(),m=g,u=L,$=x(()=>j.entities.items),{item:l}=O(m),f=k(!1),_=x(()=>{var i,a;return(a=(i=l.value)==null?void 0:i.craft)==null?void 0:a.length}),A=i=>{f.value=!f.value,u("choice",i)};function y(i){return $.value.find(a=>a.code===i)}function M(i){u("choice",i)}const h=x(()=>l.value.name===b.query.name);return(i,a)=>(o(),r("ol",null,[c(l)?(o(),r("div",{key:0,class:V([{"font-bold":_.value},"flex items-center group"]),onClick:a[1]||(a[1]=e=>A(c(l)))},[t("button",{onClick:a[0]||(a[0]=e=>M(c(l)))},[N(R,{url:c(l).src,class:"mr-2 mb-1"},null,8,["url"])]),t("div",{class:V(["border rounded-r-lg p-3 h-16 group-hover:border-orange",[{"border-orange":h.value},{"border-purple":g.activeChild}]])},[t("button",{class:V(["group-hover:text-orange",{"text-orange":h.value}])},[I(v(c(l).name)+" "+v(g.count?`${g.count} шт.`:"")+" ",1),K,_.value?(o(),r("span",G," [ "+v(f.value?"-":"+")+" ] ",1)):d("",!0)],2),t("div",Q,[c(l).level!=="0"?(o(),r("span",W,v(c(l).level)+" lvl ",1)):d("",!0),c(l).forge?(o(),r("div",X,[I(" крафт: "),t("span",Y," ("+v(c(l).alterForge?"разные варианты":c(l).forge)+") ",1)])):d("",!0)])],2)],2)):d("",!0),_.value&&f.value?(o(),r("ul",Z,[c(l).alterCraft.length?(o(),r("div",ee,[t("span",te," ("+v(c(l).forge)+") ",1)])):d("",!0),(o(!0),r(C,null,T(c(l).craft,e=>(o(),w(B,{count:e.count,key:e.code,item:y(e.code),onChoice:a[2]||(a[2]=n=>u("choice",n)),activeChild:h.value},null,8,["count","item","activeChild"]))),128)),c(l).alterCraft.length?(o(),r("div",se,[t("span",le," ("+v(c(l).alterForge)+") ",1),(o(!0),r(C,null,T(c(l).alterCraft,e=>(o(),w(B,{count:e.count,key:e.code,item:y(e.code),onChoice:a[3]||(a[3]=n=>u("choice",n)),activeChild:h.value},null,8,["count","item","activeChild"]))),128))])):d("",!0)])):d("",!0)]))}};const oe={class:"flex w-full max-h-screen gap-4 h-full pr-8 z-20 overflow-hidden"},ne={class:"w-1/2"},ae={class:"scrollbar-custom h-full mirror pr-8"},re={class:"mirror"},ue={class:"w-1/3 pt-14"},ce={class:"my-2 flex w-80 rounded-2xl border border-solid border-second bg-gray px-3 pl-3 text-second ease-out ml-auto"},ie=t("label",{for:"input",class:"absolute p-2 duration-300 ease-out"}," поиск по названию ",-1),de={class:"my-1 flex items-end text-right"},me=t("span",{class:"ml-auto"},"с удачей",-1),ve={class:"my-1 flex items-end text-right"},pe=t("span",{class:"ml-auto"},"по возрастанию уровня",-1),fe={class:"w-1/2 pt-8"},_e={key:0,class:"p-4 bg-silver text-black rounded-2xl pl-8"},he={class:"text-xl pb-4 flex justify-between leading-5"},xe={key:0,class:"text-purple"},ge=["innerHTML"],be=["innerHTML"],ye={key:1,class:"scrollbar-custom h-[calc(100%-100px)]"},ke=t("div",{class:"py-2 text-xl"},"Используется в:",-1),Ce={class:"flex flex-wrap gap-2 pl-8"},we=["onClick"],$e={class:"group-hover:block hidden absolute -left-8 -top-11 w-fit bg-silver text-purple rounded-md py-2 px-4 border border-purple z-10 min-w-max max-w-36"},Oe={__name:"ItemsTestPage",setup(g){const L=S(),b=F(),m=x(()=>j.entities.items),u=k(null);function $(e){return e.replaceAll("|n","<br/>").replaceAll("<br/><br/>","")}const l=k(""),f=k(!1),_=k(!1),A=x(()=>{var n;if(!((n=m.value)!=null&&n.length))return[];let e=m.value.filter(s=>s.name.toLowerCase().includes(l.value.toLowerCase()));return f.value&&(e=e.filter(s=>s.desc.includes("Удача"))),_.value?e=e.sort((s,p)=>s.level-p.level):e=e.sort((s,p)=>p.level-s.level),e}),y=x(()=>{var e;return(e=m.value)!=null&&e.length?m.value.filter(n=>n.craft.some(s=>{var p;return s.code===((p=u.value)==null?void 0:p.code)})):[]});function M(e){const n=m.value.find(s=>s.code===e.code);n&&(u.value=n),i(n.name)}function h(e){u.value=e,i(e.name)}function i(e){L.push({name:"craft",query:{name:e}})}function a(){m.value.length&&(u.value=m.value.find(e=>e.name===b.query.name))}return P(()=>{b.query.name&&a()}),z(()=>b.query.name,()=>a()),z(m,()=>{a()}),(e,n)=>(o(),r(C,null,[m.value.length?d("",!0):(o(),w(J,{key:0,class:"mt-20"})),t("main",oe,[t("div",ne,[t("ul",ae,[t("div",re,[(o(!0),r(C,null,T(A.value,s=>(o(),w(B,{key:s.code,item:s,onChoice:n[0]||(n[0]=p=>h(p)),count:s.count},null,8,["item","count"]))),128))])])]),t("div",ue,[t("div",ce,[q(t("input",{autocomplete:"off","onUpdate:modelValue":n[1]||(n[1]=s=>l.value=s),placeholder:" ",id:"input",class:"relative z-10 w-full py-4"},null,512),[[U,l.value]]),ie]),t("label",de,[me,q(t("input",{type:"checkbox",class:"ml-2 h-5 w-5 bg-silver accent-green","onUpdate:modelValue":n[2]||(n[2]=s=>f.value=s)},null,512),[[D,f.value]])]),t("label",ve,[pe,q(t("input",{type:"checkbox",class:"ml-2 h-5 w-5 bg-silver accent-green","onUpdate:modelValue":n[3]||(n[3]=s=>_.value=s)},null,512),[[D,_.value]])])]),t("div",fe,[u.value?(o(),r("div",_e,[t("div",he,[I(v(u.value.name)+" ",1),u.value.level!=="0"?(o(),r("span",xe,v(u.value.level)+" lvl ",1)):d("",!0)]),t("div",{innerHTML:$(u.value.desc)},null,8,ge),u.value.extended?(o(),w(E,{key:0,class:"-my-4"},{button:H(()=>[I("Подробнее")]),content:H(()=>[t("div",{innerHTML:$(u.value.extended),class:"leading-5"},null,8,be)]),_:1})):d("",!0)])):d("",!0),y.value.length?(o(),r("div",ye,[ke,t("div",Ce,[(o(!0),r(C,null,T(y.value,s=>(o(),r("div",{key:s.code,class:"group relative"},[t("button",{class:"mr-2 mb-1 flex gap-2 items-center",onClick:p=>M(s)},[N(R,{url:s.src},null,8,["url"]),t("div",$e,v(s.name),1)],8,we)]))),128))])])):d("",!0)])])],64))}};export{Oe as default};
