import{t as O,o as t,c as s,a,f as n,g as c,h as R,i as z,j as m,r as A,k as $,b as i,e as y,d as _,n as E,w as x,F as f,l as g,s as V,_ as G}from"./index-9981c0e0.js";import{_ as J}from"./BaseButton-fa3223d5.js";import{_ as K}from"./ThePreloader-e9517dee.js";const k={strength:"сила",agility:"ловкость",intelligence:"разум",attack:"урон",defence:"защита",visibility:"обзор",luck:"удача",hp:"ХП",mp:"МП",resist:"сопротивление магии",hp_regeneration:"регенерация здоровья",mp_regeneration:"регенерация маны",mp_regen:"регенерация маны",stealth_detection:"обнаружение невидимок",as:"скорость атаки",ms:"скорость бега",manaburn:"каждый удар сжигает",evade:"уклонение",aura:"аура",active:"актив",distant_resist:"снижение урона",critical_chance:"шанс крита:",block_chance:"шанс блока:"},Q={key:0},W={key:1},X={key:0},Y={key:1},Z={key:2},ee={key:3},te={key:4},se={__name:"ItemParams",props:{item:{default:()=>{},type:Object},param:{default:"",type:String},equalityParams:{default:!1,type:Boolean}},setup(P){const v=P,{item:u,param:r,equalityParams:b}=O(v);return(e,w)=>(t(),s("li",null,[a(b)&&a(r)==="strength"?(t(),s("div",Q," все статы: "+n(a(u).params.strength),1)):a(u).params[a(r)]&&a(k)[a(r)]?(t(),s("div",W,[a(r)==="manaburn"?(t(),s("span",X,n(a(k)[a(r)])+" "+n(a(u).params[a(r)])+" маны противнику ",1)):a(r)==="critical_chance"?(t(),s("span",Y,n(a(k)[a(r)])+" "+n(a(u).params[a(r)])+"% на x"+n(a(u).params.critical_value),1)):a(r)==="block_chance"?(t(),s("span",Z,n(a(u).params[a(r)])+"% на блок "+n(a(u).params.block_value)+" урона ",1)):(t(),s("span",ee,n(a(k)[a(r)])+": "+n(a(u).params[a(r)]),1)),["as","mp_regeneration","resist","distant_resist","evade"].includes(a(r))?(t(),s("span",te,"%")):c("",!0)])):c("",!0)]))}},ae={key:1},ne={key:2,class:"flex w-full justify-between py-4"},le={class:"h-[calc(100vh-350px)] pb-20"},oe={class:"text-3xl xxl:text-6xl"},re={class:"my-2 flex flex-wrap items-center"},ie={class:"flex w-full flex-wrap items-center xs:w-auto"},ce=["src"],ue={class:"text-md ml-2 flex h-fit flex-1 justify-end whitespace-nowrap text-second"},de={class:"ml-4 flex flex-col content-center justify-center"},_e={key:0},me={key:1},ve={key:2},he={class:"text-lg text-red"},pe={key:3},ye={key:4},xe={key:5},fe=["innerHTML"],ge={key:0,class:"my-2 w-full text-white lg:text-xl"},ke={key:1,class:"w-full text-lg text-white"},be={class:"text-green"},we={key:2,class:"text-orange"},$e={key:3,class:"text-orange"},Pe={key:4,class:"my-2 w-full"},Ie={key:5,class:"my-1 w-full p-2"},je={class:"text-red hover:border-b"},Ce={key:0},Be={key:1},qe={class:"w-full"},Me={key:0,class:"border-bg-silver rounded-lg border p-2 w-fit"},Ne={class:"text-red hover:border-b"},Se={key:0},Te={key:1},Ue={key:6,class:"my-2 rounded-lg border border-silver p-2"},Ve={class:"text-red hover:border-b"},De={key:0},Fe={key:1},Re={__name:"ItemPage",setup(P){const{user:v,addItem:u}=R(),r=z(),b=m(()=>V.entities.items),e=m(()=>V.currentItem("items",r.params.id)),w=m(()=>{var l,d;return((l=e.value)==null?void 0:l.goblins)&&!((d=e.value)!=null&&d.goblins.includes(v.goblin.name))}),I=m(()=>{var l;return(l=e.value.notUsed)==null?void 0:l.some(d=>v.inventory.map(p=>p.id).includes(d.id))}),D=m(()=>I.value?"нельзя добавить":w.value?"не подходит гоблину":v.inventory.length===6?"инвентарь переполнен":j.value?`не более ${e.value.max_count||1} шт.`:"добавить в инвентарь"),j=m(()=>{const l=v.inventory.filter(d=>d.id===e.value.id);return!e.value.max_count&&l.length===1?!0:e.value.max_count<=l.length}),F=()=>{j.value||w.value||I.value||v.inventory.length<6&&u(e.value)},C=l=>{var d;return(d=e.value)!=null&&d.count&&e.value.count[l]?`${e.value.count[l]}шт`:""},L=l=>l==="Ангельская кузница"?"text-yellow":l==="Вневременная кузня"?"text-purple":l==="Великая кузница"?"text-orange":l==="Котелок Попса"?"text-green":l==="Демоническая кузница"?"text-red":"",B=m(()=>e.value.params.strength===e.value.params.agility&&e.value.params.agility===e.value.params.intelligence),H=m(()=>Object.keys(e.value.params).sort(l=>["strength","agility","intelligence"].includes(l)?-1:1).filter(l=>B.value?!["agility","intelligence"].includes(l):!0));return(l,d)=>{var q,M,N,S,T,U;const p=A("router-link");return b.value.length?e.value?(t(),s("div",ne,[i("div",le,[i("div",oe,n(e.value.name),1),i("div",re,[i("div",ie,[e.value.src?(t(),s("img",{key:0,src:e.value.src,alt:"logo",class:"h-24 w-24"},null,8,ce)):(t(),$(G,{key:1,color:"red"})),i("div",ue,[y(J,{onClick:F,text:D.value},null,8,["text"])]),i("div",de,[((q=e.value)==null?void 0:q.level)>1?(t(),s("div",_e,"требуемый уровень: "+n(e.value.level),1)):(t(),s("div",me,"Нет ограничения по уровню")),(M=e.value.goblins)!=null&&M.length?(t(),s("div",ve,[_(" Только для класса: "),i("span",he,n(e.value.goblins.join(", ")),1)])):(t(),s("div",pe,"Подходит для всех классов")),e.value.craft?(t(),s("div",ye,[_(" крафт в: "),i("span",{class:E(L(e.value.craft))},n(e.value.craft),3)])):c("",!0),e.value.boss?(t(),s("div",xe,[_(" Босс: "),y(p,{to:`/boss?name=${(N=e.value.boss)==null?void 0:N.name}`,class:"mr-2 text-red"},{default:x(()=>{var o;return[_(n((o=e.value.boss)==null?void 0:o.name),1)]}),_:1},8,["to"])])):c("",!0)])]),i("div",{class:"w-full text-white lg:text-xl",innerHTML:e.value.description},null,8,fe),e.value.max_count?(t(),s("div",ge," Не более "+n(e.value.max_count)+" шт. ",1)):c("",!0),e.value.source?(t(),s("div",ke,[_(" Где достать: "),i("span",be,n(e.value.source),1)])):c("",!0),e.value.isMedicDD?(t(),s("div",we,"Медик-ДД")):c("",!0),e.value.isMedicSupport?(t(),s("div",$e,"Медик-сап")):c("",!0),e.value.params?(t(),s("ul",Pe,[_(" Бонусы предмета: "),(t(!0),s(f,null,g(H.value,(o,h)=>(t(),$(se,{key:h,class:"ml-7",item:e.value,param:o,equalityParams:B.value},null,8,["item","param","equalityParams"]))),128))])):c("",!0),(S=e.value.notUsed)!=null&&S.length?(t(),s("div",Ie,[_(" Нельзя использовать с: "),(t(!0),s(f,null,g(e.value.notUsed,(o,h)=>(t(),s("span",{class:"text-md text-end",key:o.id},[y(p,{to:`/item/${o.id}`},{default:x(()=>[i("span",je,n(C(o.id))+" "+n(o.name),1),h!==e.value.notUsed.length-1?(t(),s("span",Ce,", ")):(t(),s("span",Be,"; "))]),_:2},1032,["to"])]))),128))])):c("",!0),i("div",qe,[(T=e.value.children)!=null&&T.length?(t(),s("div",Me,[_(' Из предмета "'+n(e.value.name)+'" можно скрафтить: ',1),(t(!0),s(f,null,g(e.value.children,(o,h)=>(t(),s("span",{class:"text-md text-end",key:o.id},[y(p,{to:`/item/${o.id}`},{default:x(()=>[i("span",Ne,n(o.name),1),h!==e.value.children.length-1?(t(),s("span",Se,", ")):(t(),s("span",Te,"; "))]),_:2},1032,["to"])]))),128))])):c("",!0)]),(U=e.value.parents)!=null&&U.length?(t(),s("div",Ue,[_(' Предмет "'+n(e.value.name)+'" крафтится из: ',1),(t(!0),s(f,null,g(e.value.parents,(o,h)=>(t(),s("span",{class:"text-md text-end",key:o.id},[y(p,{to:`/item/${o.id}`},{default:x(()=>[i("span",Ve,n(C(o.id))+" "+n(o.name),1),h!==e.value.parents.length-1?(t(),s("span",De,", ")):(t(),s("span",Fe,"; "))]),_:2},1032,["to"])]))),128))])):c("",!0)])])])):(t(),s("div",ae,"Такого предмета нет")):(t(),$(K,{key:0}))}}};export{Re as default};
