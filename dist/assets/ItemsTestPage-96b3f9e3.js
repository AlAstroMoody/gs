import{e as k,O as F,r as y,l,m as r,u as a,B as R,q as e,D as H,z as L,A as p,F as m,H as w,I as M,x as $,o as j,w as O,J as A,K as P,L as B,y as D}from"./@vue-5e60537e.js";import{a as U,u as S}from"./vue-router-ee9931d1.js";import{a as N,_ as E}from"./BaseItemImage-395a3b45.js";import{s as q}from"./index-a37cdb2b.js";import{_ as J}from"./ThePreloader-395e40a9.js";import"./yandex-metrika-vue3-31715aa8.js";import"./@vueuse-6ebe5ee8.js";import"./firebase-6ed2b05d.js";import"./@firebase-40ef63b3.js";import"./idb-81bdbf9b.js";import"./picocolors-7608e719.js";import"./tailwindcss-animation-delay-bb812693.js";import"./tailwindcss-f34f17cc.js";import"./tailwind-scrollbar-b75acc9f.js";import"./nouislider-b0ecb9ee.js";const K={class:"border rounded-r-lg p-3 h-16 group-hover:border-orange"},G={class:"group-hover:text-orange"},Q=e("span",{class:"mx-1 text-red group-hover:text-purple"},null,-1),W={key:0,class:"text-orange"},X={class:"text-sm flex justify-between"},Y={key:0,class:"text-silver text-left mr-4"},Z={key:1,class:"text-right ml-auto"},ee={class:"text-green"},te={key:1,class:"pl-6"},se={key:0},le={class:"text-green text-sm"},oe={key:1},ne={class:"text-green text-sm"},z={__name:"AppCraftTestItem",props:{item:{default:()=>{},type:Object},count:{type:Number,default:0}},emits:["choice"],setup(C,{emit:V}){const g=C,c=V,i=k(()=>q.entities.items),{item:o}=F(g),f=y(!1),h=k(()=>{var v,u;return(u=(v=o.value)==null?void 0:v.craft)==null?void 0:u.length}),b=v=>{f.value=!f.value,c("choice",v)};function I(v){return i.value.find(u=>u.code===v)}function T(v){c("choice",v)}return(v,u)=>(l(),r("ol",null,[a(o)?(l(),r("div",{key:0,class:R([{"font-bold":h.value},"flex items-center group"]),onClick:u[1]||(u[1]=d=>b(a(o)))},[e("button",{onClick:u[0]||(u[0]=d=>T(a(o)))},[H(N,{url:a(o).src,class:"mr-2 mb-1"},null,8,["url"])]),e("div",K,[e("button",G,[L(p(a(o).name)+" "+p(C.count?`${C.count} шт.`:"")+" ",1),Q,h.value?(l(),r("span",W," [ "+p(f.value?"-":"+")+" ] ",1)):m("",!0)]),e("div",X,[a(o).level!=="0"?(l(),r("span",Y,p(a(o).level)+" lvl ",1)):m("",!0),a(o).forge?(l(),r("div",Z,[L(" крафт: "),e("span",ee," ("+p(a(o).alterForge?"разные варианты":a(o).forge)+") ",1)])):m("",!0)])])],2)):m("",!0),h.value&&f.value?(l(),r("ul",te,[a(o).alterCraft.length?(l(),r("div",se,[e("span",le," ("+p(a(o).forge)+") ",1)])):m("",!0),(l(!0),r(w,null,M(a(o).craft,d=>(l(),$(z,{count:d.count,key:d.code,item:I(d.code),onChoice:u[2]||(u[2]=x=>c("choice",x))},null,8,["count","item"]))),128)),a(o).alterCraft.length?(l(),r("div",oe,[e("span",ne," ("+p(a(o).alterForge)+") ",1),(l(!0),r(w,null,M(a(o).alterCraft,d=>(l(),$(z,{count:d.count,key:d.code,item:I(d.code),onChoice:u[3]||(u[3]=x=>c("choice",x))},null,8,["count","item"]))),128))])):m("",!0)])):m("",!0)]))}};const re={class:"flex w-full max-h-screen gap-4 h-full pr-8 z-20 overflow-hidden"},ae={class:"w-1/2"},ue={class:"scrollbar-custom h-full mirror pr-8"},ce={class:"mirror"},ie={class:"w-1/3 pt-14"},de={class:"my-2 flex w-80 rounded-2xl border border-solid border-second bg-gray px-3 pl-3 text-second ease-out ml-auto"},me=e("label",{for:"input",class:"absolute p-2 duration-300 ease-out"}," поиск по названию ",-1),ve={class:"my-1 flex items-end text-right"},pe=e("span",{class:"ml-auto"},"с удачей",-1),_e={class:"my-1 flex items-end text-right"},fe=e("span",{class:"ml-auto"},"по возрастанию уровня",-1),he={class:"w-1/2 pt-8"},xe={key:0,class:"p-4 bg-silver text-black rounded-2xl pl-8"},ge={class:"text-xl pb-4 flex justify-between"},be={key:0,class:"text-purple"},ye=["innerHTML"],ke=["innerHTML"],we={key:1,class:"scrollbar-custom h-[calc(100%-100px)]"},$e=e("div",{class:"py-2 text-xl"},"Используется в:",-1),Ce={class:"flex flex-wrap gap-2 pl-8"},Ie=["onClick"],Te={class:"group-hover:block hidden absolute -left-8 -top-11 w-fit bg-silver text-purple rounded-md py-2 px-4 border border-purple z-10 min-w-max max-w-36"},Ue={__name:"ItemsTestPage",setup(C){const V=U(),g=S(),c=k(()=>q.entities.items),i=y(null);function o(s){return s.replaceAll("|n","<br/>").replaceAll("<br/><br/>","")}const f=y(""),h=y(!1),b=y(!1),I=k(()=>{var n;if(!((n=c.value)!=null&&n.length))return[];let s=c.value.filter(t=>t.name.toLowerCase().includes(f.value.toLowerCase()));return h.value&&(s=s.filter(t=>t.desc.includes("Удача"))),b.value?s=s.sort((t,_)=>t.level-_.level):s=s.sort((t,_)=>_.level-t.level),s}),T=k(()=>{var s;return(s=c.value)!=null&&s.length?c.value.filter(n=>n.craft.some(t=>{var _;return t.code===((_=i.value)==null?void 0:_.code)})):[]});function v(s){const n=c.value.find(t=>t.code===s.code);n&&(i.value=n),d(n.name)}function u(s){i.value=s,d(s.name)}function d(s){V.push({name:"craft",query:{name:s}})}function x(){c.value.length&&(i.value=c.value.find(s=>s.name===g.query.name))}return j(()=>{g.query.name&&x()}),O(g,()=>x()),(s,n)=>(l(),r(w,null,[c.value.length?m("",!0):(l(),$(J,{key:0,class:"mt-20"})),e("main",re,[e("div",ae,[e("ul",ue,[e("div",ce,[(l(!0),r(w,null,M(I.value,t=>(l(),$(z,{key:t.code,item:t,onChoice:n[0]||(n[0]=_=>u(_)),count:t.count},null,8,["item","count"]))),128))])])]),e("div",ie,[e("div",de,[A(e("input",{autocomplete:"off","onUpdate:modelValue":n[1]||(n[1]=t=>f.value=t),placeholder:" ",id:"input",class:"relative z-10 w-full py-4"},null,512),[[P,f.value]]),me]),e("label",ve,[pe,A(e("input",{type:"checkbox",class:"ml-2 h-5 w-5 bg-silver accent-green","onUpdate:modelValue":n[2]||(n[2]=t=>h.value=t)},null,512),[[B,h.value]])]),e("label",_e,[fe,A(e("input",{type:"checkbox",class:"ml-2 h-5 w-5 bg-silver accent-green","onUpdate:modelValue":n[3]||(n[3]=t=>b.value=t)},null,512),[[B,b.value]])])]),e("div",he,[i.value?(l(),r("div",xe,[e("div",ge,[L(p(i.value.name)+" ",1),i.value.level!=="0"?(l(),r("span",be,p(i.value.level)+" lvl ",1)):m("",!0)]),e("div",{innerHTML:o(i.value.desc)},null,8,ye),i.value.extended?(l(),$(E,{key:0,class:"-my-4"},{button:D(()=>[L("Подробнее")]),content:D(()=>[e("div",{innerHTML:o(i.value.extended)},null,8,ke)]),_:1})):m("",!0)])):m("",!0),T.value.length?(l(),r("div",we,[$e,e("div",Ce,[(l(!0),r(w,null,M(T.value,t=>(l(),r("div",{key:t.code,class:"group relative"},[e("button",{class:"mr-2 mb-1 flex gap-2 items-center",onClick:_=>v(t)},[H(N,{url:t.src},null,8,["url"]),e("div",Te,p(t.name),1)],8,Ie)]))),128))])])):m("",!0)])])],64))}};export{Ue as default};
