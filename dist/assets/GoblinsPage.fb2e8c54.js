import{_ as V}from"./AppItemsPopup.27269f28.js";import{M as $,r as n,c as E,G as j,E as z,o as G,N as F,a as m,b as p,d as e,n as R,v as r,y as W,s as A,F as P,i as U,t as d,f as C,e as b,x as O,k as I,T as q}from"./index.e43175d8.js";import{s as X}from"./store.79a7d66d.js";import{a as H,e as J,s as K}from"./transitions.4bf612d5.js";import{u as Q}from"./useGoblinState.6312a5ec.js";import"./AppPopup.8332f41f.js";import"./ExitIcon.3165ef9b.js";import"./FilterIcon.7af439af.js";import"./AppSidebar.24ec5bd7.js";import"./AppFilter.0f92214c.js";import"./QuestionIcon.63f87d0c.js";import"./index.af050076.js";const Y=["onClick"],T={__name:"AppCommonSlider",props:{custom:{default:()=>"",type:String}},emits:["thumbShift"],setup(B,{emit:g}){const x=B,{custom:w}=$(x),t=n(null),o=n(null),f=n(0),y=n(0),u=n(0),k=n(!1),v=E(()=>u.value-y.value),a=E(()=>{if(o.value&&t.value){const s=Number((v.value/(o.value.clientWidth-t.value.clientWidth)).toPrecision(2));return s>0?s:0}return 0}),L=()=>{g("thumbShift",a.value)};j(v,()=>{M()});const M=z(()=>{L()},100),S=s=>{s.preventDefault(),k.value||i(),k.value=!0,t.value&&(f.value=s.clientX-t.value.getBoundingClientRect().left),document.addEventListener("mousemove",h),document.addEventListener("mouseup",_)},h=s=>{if(o.value&&t.value){let c=s.clientX-f.value-o.value.getBoundingClientRect().left;c<0&&(c=0);let N=o.value.offsetWidth-t.value.offsetWidth;c>N&&(c=N),t.value.style.left=c+"px",u.value=t.value.getBoundingClientRect().left}},_=()=>{document.removeEventListener("mouseup",_),document.removeEventListener("mousemove",h)},l=s=>{i(),u.value=s.clientX,t.value&&(t.value.style.left=v.value+"px")},D=()=>!1,i=()=>{y.value=o.value.getBoundingClientRect().left,f.value=0,u.value=0,t.value.style.left="0"};return G(()=>{i(),window.addEventListener("resize",i)}),F(()=>{window.removeEventListener("resize",i)}),(s,c)=>(m(),p("div",{class:R(["h-4 w-full rounded-lg",r(w)]),ref_key:"slider",ref:o,onClick:W(l,["self"])},[e("label",{class:"relative -top-1 left-0 block h-6 w-3 rounded-lg bg-second",ref_key:"thumb",ref:t,onMousedown:S,onDragstart:D},null,544)],10,Y))}},Z={class:"mb-96 flex flex-1 flex-col justify-between px-2"},ee={class:"mb-10 flex flex-col"},te={class:"xl:flex"},se=["onClick"],le={class:"px-4 py-2"},ne={class:"flex"},oe=["src"],ae={class:"subtitle"},ie={class:"lg:p-4"},ce={class:"flex flex-wrap items-center p-4 lg:my-4"},re=e("div",{class:"mr-4 text-xl"},"\u0430\u043F\u043D\u0443\u0442\u044C \u0443\u0440\u043E\u0432\u0435\u043D\u044C:",-1),ue={class:"w-80 xs:mx-4"},de=e("div",{class:"flex justify-between"},[e("span",null,"1"),b(),e("span",null,"200")],-1),me={class:"mt-6 flex w-full flex-wrap"},fe=e("span",{class:"mr-4 text-xl"},"\u0442\u043E\u0447\u043A\u0438:",-1),ve={class:"flex flex-1 flex-wrap sm:flex-nowrap md:flex-wrap lg:flex-nowrap"},he={class:"w-full sm:mr-8 md:mr-0 lg:mr-8 lg:w-1/2"},_e=e("div",{class:"flex justify-between"},[e("span",null,"0"),b(),e("span",null,"85")],-1),pe={class:"w-full lg:w-1/2"},be=e("div",{class:"flex justify-between"},[e("span",null,"0"),b(),e("span",null,"85")],-1),De={__name:"GoblinsPage",async setup(B){let g,x;const w=E(()=>X.entities.goblins);w.value.length||([g,x]=A(()=>X.setItems("goblins")),await g,x());const{user:t,setGoblin:o,setLevel:f,changeAttack:y,changeDefense:u}=Q(),k=l=>o(l),v=l=>f(Math.round(200*l)||t.level),a=n({attack:0,defense:0}),L=l=>{a.value.attack=Math.round(85*l)||0,y(a.value.attack)},M=l=>{a.value.defense=Math.round(85*l)||0,u(a.value.defense)},S=n(null),h=n(null),_=n(null);return G(()=>{H([S]),J({el:h.value,transformOrigin:"top right"}),K({el:_.value,from:.5})}),(l,D)=>{var i;return m(),p("div",Z,[e("div",ee,[e("div",{class:"headline my-8",ref_key:"title",ref:h},"\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u0436\u0438",512),e("div",te,[e("div",{class:"mb-2 flex flex-wrap md:mr-2 xl:flex-col",ref_key:"goblinsList",ref:S},[(m(!0),p(P,null,U(w.value,s=>(m(),p("div",{key:s.id,onClick:c=>k(s),class:R(["w-fit rounded border font-medium lg:text-xl",s===r(t).goblin?"border-second ":"border-primary"])},[e("button",le,d(s.name),1)],10,se))),128))],512),(i=r(t).goblin)!=null&&i.name?(m(),p("div",{key:0,class:"flex flex-col rounded-lg bg-second p-2 text-primary md:mr-5",ref_key:"goblinCard",ref:_},[e("div",ne,[e("img",{src:`.${r(t).goblin.src}`,alt:"img",class:"mr-4 h-24 w-24"},null,8,oe),e("div",null,[e("div",ae,d(r(t).goblin.name),1),e("div",null,"\u041E\u0441\u043D\u043E\u0432\u043D\u043E\u0439 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440: "+d(r(t).goblin.mainParam),1)])]),e("div",ie,d(r(t).goblin.description),1),e("div",ce,[re,e("div",ue,[de,C(T,{onThumbShift:v,custom:"bg-primary"})]),e("div",me,[fe,e("div",ve,[e("div",he,[b(" \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u0430\u0442\u0430\u043A\u0438: "+d(a.value.attack)+" ",1),_e,C(T,{onThumbShift:L,custom:"bg-primary"})]),e("div",pe,[b(" \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u0437\u0430\u0449\u0438\u0442\u044B: "+d(a.value.defense)+" ",1),be,C(T,{onThumbShift:M,custom:"bg-primary"})])])])])],512)):O("",!0)])]),(m(),I(q,{to:"body"},[C(V,{class:"absolute right-2 top-12 block bg-second md:hidden"})]))])}}};export{De as default};
