import{c as x,r as d,o as b,a as _,b as w,t as S,F as M,i as B,f as V,y as T,D as $,E as z,G as O,H as X,n as A,z as N,s as R,w as F,I as W,J as H,d as C,e as E}from"./index.725b42b6.js";import{u as U}from"./useState.993c58d5.js";const G={class:"bg-gray rounded-2xl p-2 border-silver border"},J={key:0,class:"opacity-100"},P=["onClick"],j={__name:"AppCommonSelect",props:{options:{default:()=>[],type:Array},defaultValue:{default:"\u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435",type:String}},emits:["getOption"],setup(m,{emit:r}){const n=m,p=x(()=>[{name:n.defaultValue}].concat(n.options).filter(a=>{var t;return a.name!==((t=o.value)==null?void 0:t.name)})),e=d(!1),s=()=>{e.value=!e.value,e.value||c()},v=()=>e.value?null:h(),f=a=>{c(),e.value=!e.value,a||a===0?o.value=n.options.find(t=>(t==null?void 0:t.id)===a):o.value={name:n.defaultValue,id:void 0},r("getOption",o.value)},o=d({name:"",id:0}),h=()=>{window.addEventListener("click",s)},c=()=>{window.removeEventListener("click",s)};return(a,t)=>{var i;return b(),_("div",G,[w("label",{class:"w-full block",onClick:v},S(((i=o.value)==null?void 0:i.name)||m.defaultValue),1),e.value?(b(),_("div",J,[(b(!0),_(M,null,B(V(p),l=>(b(),_("label",{key:l.id,onClick:y=>f(l.id),class:"py-0 px-2 w-full block transition-all hover:text-primary hover:bg-second"},S(l.name||l),9,P))),128))])):T("",!0)])}}},q=(m,r)=>{let n=null;n||(n=setTimeout(()=>{m(),clearTimeout(n),n=null},r))},K=["onClick"],Q={__name:"AppCommonSlider",props:{custom:{default:()=>"",type:String}},emits:["thumbShift"],setup(m,{emit:r}){const n=m,{custom:p}=$(n),e=d(null),s=d(null),v=d(0),f=d(0),o=d(0),h=d(!1),c=x(()=>o.value-f.value),a=x(()=>{if(s.value&&e.value){const u=Number((c.value/(s.value.clientWidth-e.value.clientWidth)).toPrecision(2));return u>0?u:0}return 0}),t=()=>{r("thumbShift",a.value)};z(c,()=>{q(t,150)});const i=u=>{u.preventDefault(),h.value||k(),h.value=!0,e.value&&(v.value=u.clientX-e.value.getBoundingClientRect().left),document.addEventListener("mousemove",l),document.addEventListener("mouseup",y)},l=u=>{if(s.value&&e.value){let g=u.clientX-v.value-s.value.getBoundingClientRect().left;g<0&&(g=0);let L=s.value.offsetWidth-e.value.offsetWidth;g>L&&(g=L),e.value.style.left=g+"px",o.value=e.value.getBoundingClientRect().left}},y=()=>{document.removeEventListener("mouseup",y),document.removeEventListener("mousemove",l)},D=u=>{k(),o.value=u.clientX,e.value&&(e.value.style.left=c.value+"px")},I=()=>!1,k=()=>{f.value=s.value.getBoundingClientRect().left,v.value=0,o.value=0,e.value.style.left="0"};return O(()=>{k(),window.addEventListener("resize",k)}),X(()=>{window.removeEventListener("resize",k)}),(u,g)=>(b(),_("div",{class:A(["w-full h-4 rounded-lg",V(p)]),ref_key:"slider",ref:s,onClick:N(D,["self"])},[w("label",{class:"rounded-lg relative left-0 h-6 w-3 -top-1 bg-second block",ref_key:"thumb",ref:e,onMousedown:i,onDragstart:I},null,544)],10,K))}},Y={class:"w-full pl-3 px-3 rounded-2xl my-2 flex border border-solid border-second ease-out text-second bg-gray"},Z=w("label",{for:"input",class:"absolute p-2 ease-out duration-300"}," \u043F\u043E\u0438\u0441\u043A \u043F\u043E \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044E ",-1),ee={class:"flex items-center"},ne={__name:"AppFilter",emits:["filteredItems"],async setup(m,{emit:r}){let n,p;const e=R({name:"",level:0,goblins:[]}),{entities:s}=([n,p]=F(()=>U()),n=await n,p(),n),v=s.goblins,f=s.items;r("filteredItems",f);const o=t=>{e.level=200*t,a()},h=t=>{e.goblins=[],t.id&&e.goblins.push(t.id),a()},c=t=>{e.name=t.target.value,a()},a=()=>{var i;let t=f;e.name&&(t=t.filter(l=>l.name.toLowerCase().includes(e.name.toLowerCase()))),e.level&&(t=t.filter(l=>l.level?l.level>=e.level:null)),(i=e.goblins)!=null&&i.length&&(t=t.filter(l=>l.goblins.some(y=>e.goblins[0]===y.id))),r("filteredItems",t)};return(t,i)=>(b(),_(M,null,[w("div",Y,[W(w("input",{"onUpdate:modelValue":i[0]||(i[0]=l=>e.name=l),placeholder:" ",id:"input",class:"w-full py-4 relative z-10",onInput:i[1]||(i[1]=l=>c(l))},null,544),[[H,e.name]]),Z]),C(" \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0430 \u043E\u0442: "+S(Math.round(e.level))+" ",1),w("div",ee,[C(" 0 "),E(Q,{onThumbShift:o,class:"mx-1",custom:"bg-silver"}),C(" 200 ")]),C(" \u0438\u0433\u0440\u043E\u0432\u043E\u0439 \u043A\u043B\u0430\u0441\u0441: "),E(j,{options:V(v),onGetOption:h,"default-value":"--\u0434\u043B\u044F \u0432\u0441\u0435\u0445 \u043A\u043B\u0430\u0441\u0441\u043E\u0432--"},null,8,["options"])],64))}};export{ne as _,Q as a};
