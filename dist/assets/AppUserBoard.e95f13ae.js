import{c as d,r as _,u as D,G as S,j as I,a,b as o,d as e,v as n,t as c,f as g,F as b,i as x,e as m,H as A,K as F,k as G,w as T,y as E,x as C,L as H}from"./index.e43175d8.js";import{u as K}from"./useGoblinState.6312a5ec.js";import U from"./CollapseIcon.47b1e732.js";import q from"./ExitIcon.3165ef9b.js";import J from"./QuestionIcon.63f87d0c.js";import"./plugin-vue_export-helper.21dcd24c.js";var O="/gs/images/slot.png";const Q={key:0,class:"bottom-2 right-2 h-16 w-16 md:left-2 md:right-auto"},R={key:1,class:"inset-x-0 h-fit w-full rounded-t-2xl border border-b-0 border-silver bg-gray px-2 md:w-fit xl:px-6"},W={class:"mb-2 flex justify-center"},X={class:"overflow-hidden"},Y=["src"],Z={class:"ml-4 w-3/4"},ee=e("div",{class:"subtitle mx-auto"},'\u041A\u0440\u044F\u0433\u0437 "\u042F\u0434\u0440\u043E"',-1),te={class:"flex justify-between"},se={class:"mr-auto w-56 rounded-lg border border-second p-1 text-center"},le={class:"mb-2 flex justify-center"},ae={class:"flex h-fit w-fit max-w-[132px] flex-col flex-wrap"},oe={class:"hidden w-full flex-wrap xs:flex"},ie=["onMouseenter"],ne={key:0,class:"absolute right-0 top-0 z-10 rounded-full border border-double border-white"},re=["src"],ue={key:2,class:"flex h-16 w-16 bg-silver"},ce={class:"flex-1 pl-1 pr-4 xl:px-6"},ve=e("span",null,[m("\u043E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 "),e("br"),m("\u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B:")],-1),de={class:"ml-1"},me={class:"px-1 xl:px-6"},pe=e("span",null,[m(" \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 "),e("br")],-1),_e=e("span",null,"\u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B:",-1),fe={class:"ml-1"},Se={__name:"AppUserBoard",setup(he){const{user:l,itemsStats:t,removeItem:M}=K(),j=d(()=>{let i=0;switch(l.goblin.mainParam){case"\u0421\u0438\u043B\u0430":i=l.goblin.stats.strength+t.value.strength;break;case"\u041B\u043E\u0432\u043A\u043E\u0441\u0442\u044C":i=l.goblin.stats.agility+t.value.agility;break;default:i=l.goblin.stats.intelligence+t.value.intelligence;break}return t.value.attack+i}),B=d(()=>t?Math.floor(1+t.value.defence+(l.goblin.stats.agility+t.value.agility)/3):0),P=d(()=>t.value.strength*20+t.value.hp),L=d(()=>t.value.intelligence*15+t.value.mp),v=_(""),f=_(!1),w=(i,u)=>{f.value=!!i,i&&(v.value=i,v.value.index=u)},N=d(()=>[{title:"hp:",value:P},{title:"mp:",value:L},{title:"\u0441\u0438\u043B\u0430:",value:t.value.strength},{title:"\u043B\u043E\u0432\u043A\u043E\u0441\u0442\u044C:",value:t.value.agility},{title:"\u0440\u0430\u0437\u0443\u043C:",value:t.value.intelligence},{title:"\u0443\u0440\u043E\u043D:",value:j.value+l.attackPoints*100},{title:"\u0437\u0430\u0449\u0438\u0442\u0430:",value:B.value+l.defencePoints*3}]),V=d(()=>[{title:"\u0443\u0434\u0430\u0447\u0430:",value:t.value.luck||0},{title:"\u043C\u0430\u0433. \u0440\u0435\u0437\u0438\u0441\u0442:",value:`${t.value.resist||0}%`},{title:"c\u043A\u043E\u0440\u043E\u0441\u0442\u044C \u0431\u0435\u0433\u0430:",value:(t.value.ms||0)+l.goblin.stats_increase.ms},{title:"c\u043A\u043E\u0440\u043E\u0441\u0442\u044C \u0430\u0442\u0430\u043A\u0438:",value:t.value.as>=500?"max":`${t.value.as||0}%`},{title:"\u0440\u0435\u0433\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u044F hp:",value:`${t.value.hp_regeneration+Math.floor(t.value.strength/100)||0}/\u0441\u0435\u043A`},{title:"\u0440\u0435\u0433\u0435\u043D\u0435\u0440\u0430\u0446\u0438\u044F mp:",value:`${t.value.mp_regeneration+Math.floor(t.value.intelligence/100)||0}%`}]),r=_(!0),{width:y}=D();S(y,()=>{["xxs","xs","sm"].includes(y.value)&&(r.value=!1)});const h=_(null);return S(()=>l,async()=>{r.value||(h.value.classList.add("animate-ping"),await H(600),h.value.classList.remove("animate-ping"))},{deep:!0}),r.value=!1,(i,u)=>{const z=I("router-link");return r.value?(a(),o("div",R,[e("div",W,[e("div",X,[e("img",{src:`.${n(l).goblin.src}`,alt:"logo",class:"h-16 w-16"},null,8,Y)]),e("div",Z,[ee,e("div",te,[e("div",se," \u0423\u0440\u043E\u0432\u0435\u043D\u044C "+c(n(l).level)+", "+c(n(l).goblin.name),1),g(U,{onClick:u[1]||(u[1]=s=>r.value=!r.value)})])])]),e("div",le,[e("div",ae,[e("div",oe,[(a(),o(b,null,x(6,s=>{var k,$;return e("div",{key:s,class:"relative m-one h-16 w-16 border-second bg-slot",onMouseenter:p=>w(n(l).inventory[s-1],s),onMouseleave:u[2]||(u[2]=p=>w({}))},[A(e("div",{class:"absolute -top-12 whitespace-nowrap rounded-md border border-primary bg-silver p-2 text-primary"},c(v.value.name),513),[[F,f.value&&((k=v.value)==null?void 0:k.name)&&(($=v.value)==null?void 0:$.index)===s]]),n(l).inventory[s-1]?(a(),G(z,{key:0,to:`/item/${n(l).inventory[s-1].id}`},{default:T(()=>{var p;return[f.value&&((p=v.value)==null?void 0:p.index)===s?(a(),o("button",ne,[g(q,{onClick:E(ge=>n(M)(s),["prevent"]),width:30,height:30,color:"white",class:"duration-500 hover:rotate-90"},null,8,["onClick"])])):C("",!0),n(l).inventory[s-1].src?(a(),o("img",{key:1,src:`.${n(l).inventory[s-1].src}`,alt:"img"},null,8,re)):(a(),o("div",ue,[g(J,{class:"m-auto"})]))]}),_:2},1032,["to"])):C("",!0)],40,ie)}),64))])]),e("div",ce,[ve,(a(!0),o(b,null,x(N.value,s=>(a(),o("div",{class:"flex justify-between",key:s.title},[m(c(s.title)+" ",1),e("span",de,c(s.value),1)]))),128))]),e("div",me,[pe,_e,(a(!0),o(b,null,x(V.value,s=>(a(),o("div",{class:"flex justify-between",key:s.title},[m(c(s.title)+" ",1),e("span",fe,c(s.value),1)]))),128))])])])):(a(),o("div",Q,[e("button",null,[e("img",{class:"relative z-10",src:O,alt:"logo",onClick:u[0]||(u[0]=s=>r.value=!r.value)}),e("span",{class:"absolute left-0 top-0 inline-flex h-full w-full rounded-full bg-silver bg-gradient-to-r from-purple opacity-75",ref_key:"collapse",ref:h},null,512)])]))}}};export{Se as default};
