<template>
  <svg viewBox='0 0 22 34' fill='none' xmlns='http://www.w3.org/2000/svg'
       class='lamp' @click='toggleTheme'>
    <path fill='var(--color-text)'
          d='M18 3.6C15 1.6 12.2 0.8 9 1.45C4.8 2.2 1.4 5.8 0.8 10C0.25 13.6 1.5 17.15 4.1 19.5C5.29 20.6 6 22.1 6.1 23.8C6.1 23.86 6.11895 23.8888 6.12577 23.9185V29C6 30 6.4 30 6.7 30H7C7.41865 31.5 8.6 33 10 32.6H12.4C13.8 32.6 15 31.5 15 29.9H15.7C16 30 16 30 16 29V24C16 24 16 24 16 24C16 22 17 21 18 19C20 17 22 15 22 12C22 9 20.294 5.6 18 4ZM9.27115 13.8172H8.44426C7.98831 13.8172 7.61738 13.4463 7.61738 12.9903C7.61738 12.5344 7.98831 12.1634 8.44426 12.1634C8.90022 12.1634 9.27115 12.5344 9.27115 12.9903V13.8172ZM13.077 12.9903C13.077 12.5344 13.4479 12.1634 13.9042 12.1634C14.3601 12.1634 14.7311 12.5344 14.7311 12.9903C14.7311 13.4463 14.3601 13.8172 13.9042 13.8172H13.078L13.077 12.9903ZM12.753 24.3286H15.1458V28.7755H14.6532C14.6522 28.7755 14.6511 28.7751 14.6496 28.7751C14.6482 28.7751 14.6475 28.7755 14.6461 28.7755H7.70169C7.70061 28.7755 7.69953 28.7751 7.6981 28.7751C7.69666 28.7751 7.69595 28.7755 7.69451 28.7755H7.20233V24.3286H12.3559H12.753ZM10.3473 23.2524V14.8934H12.0036L12.0158 23.2524H10.3473ZM12.3954 31.5367H9.95238C9.14954 31.5367 8.47547 30.8178 8.28893 29.8517H14.0584C13.8723 30.8178 13.1982 31.5367 12.3954 31.5367ZM17.5432 18.682C16.1542 19.9509 15.332 21.5566 15.1781 23.2524H13.0917L13.0798 14.8934H13.9042C14.9535 14.8934 15.8073 14.0396 15.8073 12.9903C15.8073 11.941 14.9535 11.0872 13.9042 11.0872C12.8545 11.0872 12.0008 11.941 12.0008 12.991L12.0018 13.8172H10.3473V12.9903C10.3473 11.941 9.49356 11.0872 8.44426 11.0872C7.39497 11.0872 6.54118 11.941 6.54118 13C6.5 14 7.4 14.9 8.4 14.9H9.3V23.25H7C6.9 21.5 6 19.9 4.8 18.7C2.5 16.6 1.38 13.4 1.8 10.3C2.4 6.4 5.5 3 9 2.5C12.1 1.9 15 2.6 17.2 4.4C19.36 6.2 20.6 8.9 20.6 11.7C20.6 14.4 19.5 16.9 17.5 18.72Z'></path>
  </svg>
</template>
<script setup lang='ts'>
import { ref } from 'vue'

const isDarkTheme = ref<boolean>(true)

const checkColorTheme = () => {
  isDarkTheme.value = window.matchMedia('(prefers-color-scheme: dark)').matches
  changeBodyClass()
}

const toggleTheme = () => {
  isDarkTheme.value = !isDarkTheme.value
  changeBodyClass()
}

const changeBodyClass = () => {
  document.body.className = isDarkTheme.value ? 'dark' : 'light'
}

const media = window.matchMedia('(prefers-color-scheme: dark)')
if (media.addEventListener) {
  media.addEventListener('change', checkColorTheme)
}
</script>

<style scoped lang='scss'>
.lamp {
  cursor: pointer;
  width: 40px;
  transform: rotate(180deg);
}
</style>